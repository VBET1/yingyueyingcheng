{"remainingRequest":"D:\\传出\\xm\\第六天\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\传出\\xm\\第六天\\vue-admin-template\\src\\views\\system\\sysMovie\\list.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\传出\\xm\\第六天\\vue-admin-template\\src\\views\\system\\sysMovie\\list.vue","mtime":1727401231669},{"path":"D:\\传出\\xm\\第六天\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1726969924886},{"path":"D:\\传出\\xm\\第六天\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js","mtime":1726969926736},{"path":"D:\\传出\\xm\\第六天\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1726969924886},{"path":"D:\\传出\\xm\\第六天\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js","mtime":1726969927562}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovLyDlr7zlhaUNCmltcG9ydCBhcGkgZnJvbSAnQC9hcGkvbW92aWUvbW92aWUuanMnDQoNCi8vIOWvvOWFpeWIhuexuw0KaW1wb3J0IGNhdGVnb3J5YXBpIGZyb20gJ0AvYXBpL2NhdGVnb3J5L2NhdGVnb3J5LmpzJw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGxpc3Q6IFtdLA0KICAgICAgcGFnZTogMSwNCiAgICAgIGxpbWl0OiA1LA0KICAgICAgdG90YTogMCwNCiAgICAgIHNlYXJjaE9iajoge30sDQogICAgICBsaXN0TG9hZGluZzogZmFsc2UsDQogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwNCiAgICAgIHN5c01vdmllOiB7fSwNCiAgICAgIC8vIOW9seinhuWIhuexu+WIl+ihqA0KICAgICAgY2F0ZWdvcnlMaXN0OiBbXSwNCiAgICAgIGZpbGV1cmw6ICcnLA0KICAgICAgbG9hZGluZzogZmFsc2UsDQogICAgICBWaWRlb2RpYWxvZ1Zpc2libGU6IGZhbHNlDQogICAgfQ0KICB9LA0KICBtb3VudGVkKCkgew0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIC8vIHRoaXMubGlzdExvYWRpbmc9dHJ1ZTsNCiAgICB0aGlzLmZldGNoUGFnZUxpc3QoKQ0KICAgIHRoaXMuZmluZEFsbCgpDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBjaWRmb3JtYXR0ZXIocm93LGNsb3Vtbikgew0KICAgICAgaWYgKHJvdy5jaWQgPT09IDIpIHsNCiAgICAgICAgcmV0dXJuICfnlLXlvbEnDQogICAgICB9DQogICAgICBlbHNlIGlmIChyb3cuY2lkID09PSAxKSB7DQogICAgICAgIHJldHVybiAn55S16KeG5YmnJw0KICAgICAgfQ0KICAgIH0sDQogICAgc2hvd1BsYXlQYWdlKHJvdykgew0KICAgICAgY29uc29sZS5sb2cocm93LmlkKQ0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9zeXN0ZW0vYXNzaWduVmlkZW8/aWQ9JyArIHJvdy5pZCkNCiAgICB9LA0KICAgIGZpbmRBbGwoKSB7DQogICAgICBjYXRlZ29yeWFwaS5maW5kQWxsKCkudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgdGhpcy5jYXRlZ29yeUxpc3QgPSByZXNwb25zZS5kYXRhDQogICAgICB9KQ0KICAgIH0sDQogICAgZWRpdChpZCkgew0KICAgICAgLy8gMS7lvLnmoYYNCiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWUNCiAgICAgIC8vIDIu6LWL5YC8DQogICAgICBhcGkuZ2V0TW92aWVCeUlkKGlkKS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICB0aGlzLnN5c01vdmllID0gcmVzcG9uc2UuZGF0YQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8vIOaWh+S7tuW8gOWni+S4iuS8oCzlvIDlp4vlsY/luZXpga7nvakNCiAgICBoYW5kbGVCZWZvcmVVcGxvYWQoKSB7DQogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlDQogICAgfSwNCiAgICAvLyDlm77niYfkuIrkvKDmiJDlip/nmoTpkqnlrZDlh73mlbANCiAgICBoYW5kbGVJbWFnZVN1Y2Nlc3MocmVzLCBmaWxlKSB7DQogICAgICBjb25zb2xlLmxvZyhyZXMpIC8vIOW+l+WIsOeahOaYr+WbvueJh+WcsOWdgA0KICAgICAgY29uc29sZS5sb2coZmlsZSkgLy8g5b6X5Yiw5piv5LiA5Liq5a+56LGhDQogICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQ0KICAgICAgaWYgKGZpbGUucmVzcG9uc2UgIT09ICcnKSB7DQogICAgICAgIC8vIHRoaXMuc3lzTW92aWUuaW1hZ2UgPSBmaWxlLnJlc3BvbnNlLmRhdGE7DQogICAgICAgIHRoaXMuc3lzTW92aWUuaW1hZ2UgPSByZXMNCiAgICAgICAgY29uc29sZS5sb2codGhpcy5zeXNNb3ZpZS5pbWFnZSkNCiAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgdHlwZTogJ2luZm8nLA0KICAgICAgICAgIG1lc3NhZ2U6ICflm77niYfkuIrkvKDmiJDlip8nLA0KICAgICAgICAgIGR1cmF0aW9uOiA2MDAwDQogICAgICAgIH0pDQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICB0eXBlOiAnaW5mbycsDQogICAgICAgICAgbWVzc2FnZTogJ+WbvueJh+S4iuS8oOWksei0pScsDQogICAgICAgICAgZHVyYXRpb246IDYwMDANCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICB9LA0KICAgIGhhbmRsZVZpZGVvU3VjY2VzcyhyZXMsIGZpbGUpIHsNCiAgICAgIGlmIChmaWxlLnJlc3BvbnNlICE9PSAnJykgew0KICAgICAgICBjb25zb2xlLmxvZyhyZXMpIC8vIOW+l+WIsOeahOaYrw0KICAgICAgICBjb25zb2xlLmxvZygnLS0tLS0tLS0tLS0tJykNCiAgICAgICAgY29uc29sZS5sb2coZmlsZSkgLy8g5b6X5Yiw5pivDQogICAgICAgIHRoaXMuc3lzTW92aWUucGxheUlkID0gcmVzDQogICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgIHR5cGU6ICdpbmZvJywNCiAgICAgICAgICBtZXNzYWdlOiAn6KeG6aKR5LiK5Lyg5oiQ5YqfJywNCiAgICAgICAgICBkdXJhdGlvbjogNjAwMA0KICAgICAgICB9KQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgdHlwZTogJ2luZm8nLA0KICAgICAgICAgIG1lc3NhZ2U6ICfop4bpopHkuIrkvKDlpLHotKUnLA0KICAgICAgICAgIGR1cmF0aW9uOiA2MDAwDQogICAgICAgIH0pDQogICAgICB9DQogICAgfSwNCg0KICAgIHNhdmVPclVwZGF0ZSgpIHsNCiAgICAgIGlmICh0aGlzLnN5c01vdmllLmlkICE9IG51bGwpIHsNCiAgICAgICAgdGhpcy51cGRhdGVNb3ZpZSgpDQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmFkZE1vdmllKCkNCiAgICAgIH0NCiAgICB9LA0KICAgIGFkZE1vdmllKCkgew0KICAgICAgYXBpLmFkZE1vdmllKHRoaXMuc3lzTW92aWUpLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywNCiAgICAgICAgICBtZXNzYWdlOiAn5re75Yqg5oiQ5YqfIScNCiAgICAgICAgfSkNCiAgICAgICAgLy8g5YWz6Zet5by55qGGDQogICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlDQogICAgICAgIC8vIOWIt+aWsOWIl+ihqA0KICAgICAgICB0aGlzLmZldGNoUGFnZUxpc3QoKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIHVwZGF0ZU1vdmllKCkgew0KICAgICAgY29uc29sZS5sb2codGhpcy5zeXNNb3ZpZSkNCiAgICAgIGFwaS51cGRhdGVNb3ZpZSh0aGlzLnN5c01vdmllKS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsDQogICAgICAgICAgbWVzc2FnZTogJ+S/ruaUueaIkOWKnyEnDQogICAgICAgIH0pDQogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlKQ0KICAgICAgICAvLyDlhbPpl63lvLnmoYYNCiAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2UNCiAgICAgICAgLy8g5Yi35paw5YiX6KGoDQogICAgICAgIHRoaXMuZmV0Y2hQYWdlTGlzdCgpDQogICAgICB9KQ0KICAgIH0sDQogICAgYWRkKCkgew0KICAgICAgdGhpcy5zeXNNb3ZpZSA9IHt9DQogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlDQogICAgfSwNCiAgICByZW1vdmVEYXRhQnlJZChpZCkgew0KICAgICAgdGhpcy4kY29uZmlybSgn5q2k5pON5L2c5bCG5rC45LmF5Yig6Zmk6K+l5b2x6KeGLCDmmK/lkKbnu6fnu60/JywgJ+aPkOekuicsIHsNCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLA0KICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywNCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnDQogICAgICB9KS50aGVuKCgpID0+IHsNCiAgICAgICAgYXBpLnJlbW92ZU1vdmllQnlJZChpZCkudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywNCiAgICAgICAgICAgIG1lc3NhZ2U6ICfliKDpmaTmiJDlip8hJw0KICAgICAgICAgIH0pDQogICAgICAgICAgdGhpcy5mZXRjaFBhZ2VMaXN0KCkNCiAgICAgICAgfSkNCiAgICAgIH0pDQogICAgfSwNCiAgICByZXNldERhdGEoKSB7DQogICAgICAvLyAxLua4heepuuaQnOe0ouadoeS7tg0KICAgICAgdGhpcy5zZWFyY2hPYmogPSB7fQ0KICAgICAgLy8gMi7lho3mrKHliLfmlrDliJfooagNCiAgICAgIHRoaXMuZmV0Y2hQYWdlTGlzdCgpDQogICAgfSwNCiAgICBmZXRjaFBhZ2VMaXN0KHBhZ2UgPSAxKSB7DQogICAgICB0aGlzLnBhZ2UgPSBwYWdlDQogICAgICBhcGkNCiAgICAgICAgLmdldE1vdmllUGFnZUluZm8odGhpcy5wYWdlLCB0aGlzLmxpbWl0LCB0aGlzLnNlYXJjaE9iaikNCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgICAgdGhpcy5saXN0ID0gcmVzcG9uc2UuZGF0YS5yZWNvcmRzDQogICAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWwNCiAgICAgICAgfSkNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6LA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/views/system/sysMovie","sourcesContent":["<template>\r\n  <div v-loading=\"loading\" element-loading-text=\"文件上传中......\">\r\n    <!--查询表单-->\r\n    <div class=\"search-div\">\r\n      <el-form label-width=\"70px\" size=\"small\">\r\n        <el-row>\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"影视名称\">\r\n              <el-input\r\n                v-model=\"searchObj.name\"\r\n                style=\"width: 100%\"\r\n                placeholder=\"影视名称\"\r\n              />\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row style=\"display: flex\">\r\n          <el-button\r\n            type=\"primary\"\r\n            icon=\"el-icon-search\"\r\n            size=\"mini\"\r\n            @click=\"fetchPageList()\"\r\n          >搜索</el-button>\r\n          <el-button\r\n            icon=\"el-icon-refresh\"\r\n            size=\"mini\"\r\n            @click=\"resetData\"\r\n          >重置</el-button>\r\n        </el-row>\r\n      </el-form>\r\n    </div>\r\n\r\n    <!-- 工具条 -->\r\n    <div class=\"tools-div\">\r\n      <el-button\r\n        type=\"success\"\r\n        icon=\"el-icon-plus\"\r\n        size=\"mini\"\r\n        @click=\"add\"\r\n      >添 加</el-button>\r\n    </div>\r\n\r\n    <el-dialog title=\"添加/修改\" :visible.sync=\"dialogVisible\" width=\"40%\">\r\n      <el-form\r\n        ref=\"dataForm\"\r\n        :model=\"sysMovie\"\r\n        label-width=\"150px\"\r\n        size=\"small\"\r\n        style=\"padding-right: 40px\"\r\n      >\r\n        <el-form-item label=\"影视名称\">\r\n          <el-input v-model=\"sysMovie.name\" />\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"所属栏目\" prop=\"cid\">\r\n          <el-select v-model=\"sysMovie.cid\" placeholder=\"请输入影视分类\">\r\n            <el-option\r\n              v-for=\"item in categoryList\"\r\n              :key=\"item.id\"\r\n              :label=\"item.name\"\r\n              :value=\"item.id\"\r\n            />\r\n          </el-select>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"关键字\" prop=\"keyword\">\r\n          <el-input v-model=\"sysMovie.keyword\" />\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"导演\" prop=\"director\">\r\n          <el-input v-model=\"sysMovie.director\" />\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"演员\" prop=\"actor\">\r\n          <el-input v-model=\"sysMovie.actor\" />\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"影视图片\" prop=\"image\">\r\n          <el-upload\r\n            class=\"upload-demo\"\r\n            name=\"uploadImage\"\r\n            action=\"http://localhost:8085/admin/system/upload/uploadImage\"\r\n            :limit=\"1\"\r\n            :on-success=\"handleImageSuccess\"\r\n            :before-upload=\"handleBeforeUpload\"\r\n            :show-file-list=\"false\"\r\n          >\r\n            <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n          </el-upload>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"影视文件\" prop=\"video\">\r\n          <el-upload\r\n            class=\"upload-demo\"\r\n            name=\"uploadVideo\"\r\n            action=\"http://localhost:8085/admin/system/upload/uploadVideo\"\r\n            :limit=\"1\"\r\n            :on-success=\"handleVideoSuccess\"\r\n            :before-upload=\"handleBeforeUpload\"\r\n            :show-file-list=\"false\"\r\n          >\r\n            <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n          </el-upload>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"影视描述\" prop=\"description\">\r\n          <el-input v-model=\"sysMovie.description\" />\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button\r\n          size=\"small\"\r\n          icon=\"el-icon-refresh-right\"\r\n          @click=\"dialogVisible = false\"\r\n        >取 消</el-button>\r\n        <el-button\r\n          size=\"small\"\r\n          type=\"primary\"\r\n          icon=\"el-icon-check\"\r\n          @click=\"saveOrUpdate()\"\r\n        >确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <!-- 表格 -->\r\n    <el-table\r\n      v-loading=\"listLoading\"\r\n      :data=\"list\"\r\n      stripe\r\n      border\r\n      style=\"width: 100%; margin-top: 10px\"\r\n    >\r\n      <el-table-column label=\"序号\" width=\"70\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          {{ (page - 1) * limit + scope.$index + 1 }}\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <el-table-column prop=\"name\" label=\"影视名称\" />\r\n      <el-table-column prop=\"cid\" label=\"影视类型\" :formatter=\"cidformatter\" />\r\n      <el-table-column prop=\"director\" label=\"导演\" width=\"160\" />\r\n      <el-table-column prop=\"image\" label=\"剧照\">\r\n        <template slot-scope=\"scope\">\r\n          <viewer>\r\n            <img :src=\"scope.row.image\" alt=\"\" style=\"height: 80px\">\r\n          </viewer>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" width=\"200\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            type=\"primary\"\r\n            icon=\"el-icon-edit\"\r\n            size=\"mini\"\r\n            title=\"修改\"\r\n            @click=\"edit(scope.row.id)\"\r\n          />\r\n          <el-button\r\n            type=\"danger\"\r\n            icon=\"el-icon-delete\"\r\n            size=\"mini\"\r\n            title=\"删除\"\r\n            @click=\"removeDataById(scope.row.id)\"\r\n          />\r\n          <el-button\r\n            type=\"warning\"\r\n            icon=\"el-icon-baseball\"\r\n            size=\"mini\"\r\n            title=\"播放视频\"\r\n            @click=\"showPlayPage(scope.row)\"\r\n          />\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 分页组件 -->\r\n    <el-pagination\r\n      :current-page=\"page\"\r\n      :total=\"total\"\r\n      :page-size=\"limit\"\r\n      style=\"padding: 30px 0; text-align: center\"\r\n      layout=\"total, prev, pager, next, jumper\"\r\n      @current-change=\"fetchPageList\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// 导入\r\nimport api from '@/api/movie/movie.js'\r\n\r\n// 导入分类\r\nimport categoryapi from '@/api/category/category.js'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      list: [],\r\n      page: 1,\r\n      limit: 5,\r\n      tota: 0,\r\n      searchObj: {},\r\n      listLoading: false,\r\n      dialogVisible: false,\r\n      sysMovie: {},\r\n      // 影视分类列表\r\n      categoryList: [],\r\n      fileurl: '',\r\n      loading: false,\r\n      VideodialogVisible: false\r\n    }\r\n  },\r\n  mounted() {\r\n  },\r\n  created() {\r\n    // this.listLoading=true;\r\n    this.fetchPageList()\r\n    this.findAll()\r\n  },\r\n  methods: {\r\n    cidformatter(row,cloumn) {\r\n      if (row.cid === 2) {\r\n        return '电影'\r\n      }\r\n      else if (row.cid === 1) {\r\n        return '电视剧'\r\n      }\r\n    },\r\n    showPlayPage(row) {\r\n      console.log(row.id)\r\n      this.$router.push('/system/assignVideo?id=' + row.id)\r\n    },\r\n    findAll() {\r\n      categoryapi.findAll().then((response) => {\r\n        this.categoryList = response.data\r\n      })\r\n    },\r\n    edit(id) {\r\n      // 1.弹框\r\n      this.dialogVisible = true\r\n      // 2.赋值\r\n      api.getMovieById(id).then((response) => {\r\n        this.sysMovie = response.data\r\n      })\r\n    },\r\n    // 文件开始上传,开始屏幕遮罩\r\n    handleBeforeUpload() {\r\n      this.loading = true\r\n    },\r\n    // 图片上传成功的钩子函数\r\n    handleImageSuccess(res, file) {\r\n      console.log(res) // 得到的是图片地址\r\n      console.log(file) // 得到是一个对象\r\n      this.loading = false\r\n      if (file.response !== '') {\r\n        // this.sysMovie.image = file.response.data;\r\n        this.sysMovie.image = res\r\n        console.log(this.sysMovie.image)\r\n        this.$message({\r\n          type: 'info',\r\n          message: '图片上传成功',\r\n          duration: 6000\r\n        })\r\n      } else {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '图片上传失败',\r\n          duration: 6000\r\n        })\r\n      }\r\n    },\r\n    handleVideoSuccess(res, file) {\r\n      if (file.response !== '') {\r\n        console.log(res) // 得到的是\r\n        console.log('------------')\r\n        console.log(file) // 得到是\r\n        this.sysMovie.playId = res\r\n        this.$message({\r\n          type: 'info',\r\n          message: '视频上传成功',\r\n          duration: 6000\r\n        })\r\n      } else {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '视频上传失败',\r\n          duration: 6000\r\n        })\r\n      }\r\n    },\r\n\r\n    saveOrUpdate() {\r\n      if (this.sysMovie.id != null) {\r\n        this.updateMovie()\r\n      } else {\r\n        this.addMovie()\r\n      }\r\n    },\r\n    addMovie() {\r\n      api.addMovie(this.sysMovie).then((response) => {\r\n        this.$message({\r\n          type: 'success',\r\n          message: '添加成功!'\r\n        })\r\n        // 关闭弹框\r\n        this.dialogVisible = false\r\n        // 刷新列表\r\n        this.fetchPageList()\r\n      })\r\n    },\r\n    updateMovie() {\r\n      console.log(this.sysMovie)\r\n      api.updateMovie(this.sysMovie).then((response) => {\r\n        this.$message({\r\n          type: 'success',\r\n          message: '修改成功!'\r\n        })\r\n        // console.log(response)\r\n        // 关闭弹框\r\n        this.dialogVisible = false\r\n        // 刷新列表\r\n        this.fetchPageList()\r\n      })\r\n    },\r\n    add() {\r\n      this.sysMovie = {}\r\n      this.dialogVisible = true\r\n    },\r\n    removeDataById(id) {\r\n      this.$confirm('此操作将永久删除该影视, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        api.removeMovieById(id).then((response) => {\r\n          this.$message({\r\n            type: 'success',\r\n            message: '删除成功!'\r\n          })\r\n          this.fetchPageList()\r\n        })\r\n      })\r\n    },\r\n    resetData() {\r\n      // 1.清空搜索条件\r\n      this.searchObj = {}\r\n      // 2.再次刷新列表\r\n      this.fetchPageList()\r\n    },\r\n    fetchPageList(page = 1) {\r\n      this.page = page\r\n      api\r\n        .getMoviePageInfo(this.page, this.limit, this.searchObj)\r\n        .then((response) => {\r\n          this.list = response.data.records\r\n          this.total = response.data.total\r\n        })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n</style>\r\n"]}]}