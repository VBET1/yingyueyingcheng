{"remainingRequest":"C:\\Users\\86180\\Desktop\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\86180\\Desktop\\vue-admin-template\\src\\views\\system\\sysRole\\list.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\86180\\Desktop\\vue-admin-template\\src\\views\\system\\sysRole\\list.vue","mtime":1726975505292},{"path":"C:\\Users\\86180\\Desktop\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1726969924886},{"path":"C:\\Users\\86180\\Desktop\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js","mtime":1726969926736},{"path":"C:\\Users\\86180\\Desktop\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1726969924886},{"path":"C:\\Users\\86180\\Desktop\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js","mtime":1726969927562}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXBpIGZyb20gJ0AvYXBpL3JvbGUvcm9sZS5qcycNCmV4cG9ydCBkZWZhdWx0IHsNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgbGlzdExvYWRpbmc6IGZhbHNlLCAvLyAg5Yqg6L295Lit55qE5o+Q56S66K+tLi4uLi4NCiAgICAgIGxpc3Q6IFtdLA0KICAgICAgdG90YWw6IDAsDQogICAgICBwYWdlOiAxLA0KICAgICAgbGltaXQ6IDMsDQogICAgICBzZWFyY2hPYmo6IHt9LA0KICAgICAgc3lzUm9sZToge30sDQogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwNCiAgICAgIHNlbGVjdFZhbHVlRGF0YTogW10NCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5mZXRjaERhdGEoKQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgZmV0Y2hEYXRhKHBhZ2VOdW0gPSAxKSB7DQogICAgICB0aGlzLnBhZ2UgPSBwYWdlTnVtDQogICAgICBhcGkuZ2V0UGFnZUxpc3QodGhpcy5wYWdlLCB0aGlzLmxpbWl0LCB0aGlzLnNlYXJjaE9iaikudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsNCiAgICAgICAgLy8gdGhpcy5saXN0TG9hZGluZz1mYWxzZTsNCiAgICAgICAgdGhpcy5saXN0ID0gcmVzcG9uc2UuZGF0YS5yZWNvcmRzDQogICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLnRvdGFsDQogICAgICB9KQ0KICAgIH0sIGFkZCgpIHsNCiAgICAgIC8vIOWwhiDmjqfliLblvLnmoYbnmoQg5bGe5oCn6K6+572u5Li6IHRydWUNCiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWUNCiAgICAgIC8vIOa4heepuuihqOWNlQ0KICAgICAgdGhpcy5zeXNSb2xlID0ge30NCiAgICB9LA0KICAgIGJhdGNoUmVtb3ZlKCkgew0KICAgICAgaWYgKHRoaXMuc2VsZWN0VmFsdWVEYXRhLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+ivt+mAieaLqeimgeWIoOmZpOeahOiusOW9le+8gScpDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgdGhpcy4kY29uZmlybSgn5q2k5pON5L2c5bCG5rC45LmF5Yig6Zmk6K+l5paH5Lu2LCDmmK/lkKbnu6fnu60/JywgJ+aPkOekuicsIHsNCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLA0KICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywNCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnDQogICAgICB9KS50aGVuKCgpID0+IHsNCiAgICAgICAgdmFyIGlkcyA9IFtdDQogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zZWxlY3RWYWx1ZURhdGEubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICB2YXIgb2JqID0gdGhpcy5zZWxlY3RWYWx1ZURhdGFbaV0NCiAgICAgICAgICAvLyDojrflj5ZpZOWAvA0KICAgICAgICAgIHZhciBpZCA9IG9iai5pZA0KICAgICAgICAgIC8vIOWwhmlk5pS+6L+b5Yiw5pWw57uE5LitDQogICAgICAgICAgaWRzLnB1c2goaWQpDQogICAgICAgIH0NCiAgICAgICAgYXBpLmJhY3RjaHJlbW92ZUlkKGlkcykNCiAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgICAgIC8vIOaPkOekug0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywNCiAgICAgICAgICAgICAgbWVzc2FnZTogJ+WIoOmZpOaIkOWKnyEnDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLy8g5Yi35paw6aG16Z2iDQogICAgICAgICAgICB0aGlzLmZldGNoRGF0YSgpDQogICAgICAgICAgfSkNCiAgICAgIH0pDQogICAgfSwNCiAgICBoYW5kbGVTZWxlY3Rpb25DaGFuZ2Uoc2VsZWN0VmFsdWUpIHsNCiAgICAgIHRoaXMuc2VsZWN0VmFsdWVEYXRhID0gc2VsZWN0VmFsdWUNCiAgICB9LA0KICAgIC8vIOagueaNrmlk5Y675Zue5pi+5pWw5o2uDQogICAgZWRpdChpZCkgew0KICAgICAgY29uc29sZS5sb2coaWQpDQogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlDQogICAgICBhcGkuZ2V0Um9sZUJ5SWQoaWQpDQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICB0aGlzLnN5c1JvbGUgPSByZXNwb25zZS5kYXRhDQogICAgICAgIH0pDQogICAgfSwNCg0KICAgIC8vIOa3u+WKoOaIluiAheS/ruaUuQ0KICAgIHNhdmVPclVwZGF0ZSgpIHsNCiAgICAgIGlmICh0aGlzLnN5c1JvbGUuaWQgIT0gbnVsbCkgew0KICAgICAgICB0aGlzLnVwZGF0ZVJvbGUoKQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5hZGRSb2xlKCkNCiAgICAgIH0NCiAgICB9LA0KICAgIGFkZFJvbGUoKSB7DQogICAgICBhcGkuc2F2ZVJvbGUodGhpcy5zeXNSb2xlKQ0KICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsDQogICAgICAgICAgICBtZXNzYWdlOiAn5re75Yqg5oiQ5YqfIScNCiAgICAgICAgICB9KQ0KICAgICAgICAgIC8vIOWFs+mXreW8ueahhg0KICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlDQogICAgICAgICAgLy8g5Yi35paw5pWw5o2uDQogICAgICAgICAgdGhpcy5mZXRjaERhdGEoKQ0KICAgICAgICB9KQ0KICAgIH0sDQogICAgdXBkYXRlUm9sZSgpIHsNCiAgICAgIGFwaS51cGRhdGVSb2xlKHRoaXMuc3lzUm9sZSkNCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLA0KICAgICAgICAgICAgbWVzc2FnZTogJ+S/ruaUueaIkOWKnyEnDQogICAgICAgICAgfSkNCiAgICAgICAgICAvLyDlhbPpl63lvLnmoYYNCiAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZQ0KICAgICAgICAgIC8vIOWIt+aWsOaVsOaNrg0KICAgICAgICAgIHRoaXMuZmV0Y2hEYXRhKCkNCiAgICAgICAgfSkNCiAgICB9LA0KICAgIHJlbW92ZURhdGFCeUlkKGlkKSB7DQogICAgICAvLyBhbGVydChpZCk7DQogICAgICB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbmsLjkuYXliKDpmaTor6Xop5LoibIsIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6Jywgew0KICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsDQogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLA0KICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgIH0pLnRoZW4oKCkgPT4gew0KICAgICAgICAvLyDngrnlh7vnoa7lrpoNCiAgICAgICAgYXBpLnJlbW92ZUlkKGlkKS50aGVuKHJlc3BvbnNlID0+IHsNCg0KICAgICAgICB9KQ0KICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsDQogICAgICAgICAgbWVzc2FnZTogJ+WIoOmZpOaIkOWKnyEnDQogICAgICAgIH0pDQogICAgICAgIHRoaXMuZmV0Y2hEYXRhKCkNCiAgICAgIH0pDQogICAgfSwNCiAgICBzaG93QXNzaWduQXV0aChyb3cpIHsNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvc3lzdGVtL2Fzc2lnbkF1dGg/aWQ9JyArIHJvdy5pZCArICcmcm9sZU5hbWU9JyArIHJvdy5yb2xlTmFtZSkNCiAgICB9LA0KICAgIHJlc2V0RGF0YSgpIHsNCiAgICAgIC8vIOa4heepuuihqOWNlQ0KICAgICAgdGhpcy5zZWFyY2hPYmogPSB7fQ0KICAgICAgLy8g5YaN5qyh5Yi35paw5YiX6KGo5pWw5o2uDQogICAgICB0aGlzLmZldGNoRGF0YSgpDQogICAgfQ0KICB9DQp9DQoNCg=="},{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/views/system/sysRole","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <!--查询表单-->\r\n    <div class=\"search-div\">\r\n      <el-form label-width=\"70px\" size=\"small\">\r\n        <el-row>\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"角色名称\">\r\n              <el-input\r\n                v-model=\"searchObj.roleName\"\r\n                style=\"width: 100%\"\r\n                placeholder=\"角色名称\"\r\n              />\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row style=\"display:flex\">\r\n          <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"fetchData()\">搜索</el-button>\r\n          <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetData\">重置</el-button>\r\n        </el-row>\r\n      </el-form>\r\n    </div>\r\n    <!-- 工具条 -->\r\n    <div class=\"tools-div\"><br></div>\r\n    <div class=\"tools-div\">\r\n      <el-button type=\"success\" icon=\"el-icon-plus\" size=\"mini\" :disabled=\"$hasBP('bnt.sysRole.add') === false\" @click=\"add\">添 加</el-button>\r\n      <el-button class=\"btn-add\" size=\"mini\" @click=\"batchRemove()\">批量删除</el-button>\r\n    </div>\r\n\r\n    <!-- 表格 -->\r\n    <el-table v-loading=\"listLoading\" :data=\"list\" stripe border style=\"width: 100%;margin-top: 10px;\" @selection-change=\"handleSelectionChange\">\r\n      <el-table-column type=\"selection\" />\r\n      <el-table-column label=\"序号\" width=\"70\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          {{ (page - 1) * limit + scope.$index + 1 }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"roleName\" label=\"角色名称\" />\r\n      <el-table-column prop=\"roleCode\" label=\"角色编码\" />\r\n      <el-table-column prop=\"createTime\" label=\"创建时间\" width=\"160\" />\r\n      <el-table-column label=\"操作\" width=\"200\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" title=\"修改\" @click=\"edit(scope.row.id)\" />\r\n          <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" title=\"删除\" @click=\"removeDataById(scope.row.id)\" />\r\n          <el-button type=\"warning\" icon=\"el-icon-baseball\" size=\"mini\" title=\"分配权限\" @click=\"showAssignAuth(scope.row)\" />\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 分页组件 -->\r\n    <el-pagination\r\n      :current-page=\"page\"\r\n      :total=\"total\"\r\n      :page-size=\"limit\"\r\n      style=\"padding: 30px 0;\r\n     text-align: center;\"\r\n      layout=\"total, prev, pager, next, jumper\"\r\n      @current-change=\"fetchData\"\r\n    />\r\n    <el-dialog title=\"添加/修改\" :visible.sync=\"dialogVisible\" width=\"40%\">\r\n      <el-form ref=\"dataForm\" :model=\"sysRole\" label-width=\"150px\" size=\"small\" style=\"padding-right: 40px;\">\r\n        <el-form-item label=\"角色名称\">\r\n          <el-input v-model=\"sysRole.roleName\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"角色编码\">\r\n          <el-input v-model=\"sysRole.roleCode\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button\r\n          size=\"small\"\r\n          icon=\"el-icon-refresh-right\"\r\n          @click=\"dialogVisible = false\"\r\n        >取 消</el-button>\r\n        <el-button type=\"primary\" icon=\"el-icon-check\" size=\"small\" @click=\"saveOrUpdate()\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from '@/api/role/role.js'\r\nexport default {\r\n  data() {\r\n    return {\r\n      listLoading: false, //  加载中的提示语.....\r\n      list: [],\r\n      total: 0,\r\n      page: 1,\r\n      limit: 3,\r\n      searchObj: {},\r\n      sysRole: {},\r\n      dialogVisible: false,\r\n      selectValueData: []\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchData()\r\n  },\r\n  methods: {\r\n    fetchData(pageNum = 1) {\r\n      this.page = pageNum\r\n      api.getPageList(this.page, this.limit, this.searchObj).then(response => {\r\n        // console.log(response);\r\n        // this.listLoading=false;\r\n        this.list = response.data.records\r\n        this.total = response.data.total\r\n      })\r\n    }, add() {\r\n      // 将 控制弹框的 属性设置为 true\r\n      this.dialogVisible = true\r\n      // 清空表单\r\n      this.sysRole = {}\r\n    },\r\n    batchRemove() {\r\n      if (this.selectValueData.length === 0) {\r\n        this.$message.warning('请选择要删除的记录！')\r\n        return\r\n      }\r\n      this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        var ids = []\r\n        for (var i = 0; i < this.selectValueData.length; i++) {\r\n          var obj = this.selectValueData[i]\r\n          // 获取id值\r\n          var id = obj.id\r\n          // 将id放进到数组中\r\n          ids.push(id)\r\n        }\r\n        api.bactchremoveId(ids)\r\n          .then((response) => {\r\n            // 提示\r\n            this.$message({\r\n              type: 'success',\r\n              message: '删除成功!'\r\n            })\r\n            // 刷新页面\r\n            this.fetchData()\r\n          })\r\n      })\r\n    },\r\n    handleSelectionChange(selectValue) {\r\n      this.selectValueData = selectValue\r\n    },\r\n    // 根据id去回显数据\r\n    edit(id) {\r\n      console.log(id)\r\n      this.dialogVisible = true\r\n      api.getRoleById(id)\r\n        .then(response => {\r\n          this.sysRole = response.data\r\n        })\r\n    },\r\n\r\n    // 添加或者修改\r\n    saveOrUpdate() {\r\n      if (this.sysRole.id != null) {\r\n        this.updateRole()\r\n      } else {\r\n        this.addRole()\r\n      }\r\n    },\r\n    addRole() {\r\n      api.saveRole(this.sysRole)\r\n        .then(response => {\r\n          this.$message({\r\n            type: 'success',\r\n            message: '添加成功!'\r\n          })\r\n          // 关闭弹框\r\n          this.dialogVisible = false\r\n          // 刷新数据\r\n          this.fetchData()\r\n        })\r\n    },\r\n    updateRole() {\r\n      api.updateRole(this.sysRole)\r\n        .then(response => {\r\n          this.$message({\r\n            type: 'success',\r\n            message: '修改成功!'\r\n          })\r\n          // 关闭弹框\r\n          this.dialogVisible = false\r\n          // 刷新数据\r\n          this.fetchData()\r\n        })\r\n    },\r\n    removeDataById(id) {\r\n      // alert(id);\r\n      this.$confirm('此操作将永久删除该角色, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        // 点击确定\r\n        api.removeId(id).then(response => {\r\n\r\n        })\r\n        this.$message({\r\n          type: 'success',\r\n          message: '删除成功!'\r\n        })\r\n        this.fetchData()\r\n      })\r\n    },\r\n    showAssignAuth(row) {\r\n      this.$router.push('/system/assignAuth?id=' + row.id + '&roleName=' + row.roleName)\r\n    },\r\n    resetData() {\r\n      // 清空表单\r\n      this.searchObj = {}\r\n      // 再次刷新列表数据\r\n      this.fetchData()\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style></style>\r\n"]}]}