{"remainingRequest":"D:\\传出\\xm\\第六天\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\传出\\xm\\第六天\\vue-admin-template\\src\\views\\system\\sysMovie\\list.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\传出\\xm\\第六天\\vue-admin-template\\src\\views\\system\\sysMovie\\list.vue","mtime":1727433187221},{"path":"D:\\传出\\xm\\第六天\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1726969924886},{"path":"D:\\传出\\xm\\第六天\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js","mtime":1726969926736},{"path":"D:\\传出\\xm\\第六天\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1726969924886},{"path":"D:\\传出\\xm\\第六天\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js","mtime":1726969927562}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovLyDlr7zlhaUNCmltcG9ydCBhcGkgZnJvbSAnQC9hcGkvbW92aWUvbW92aWUuanMnDQoNCi8vIOWvvOWFpeWIhuexuw0KaW1wb3J0IGNhdGVnb3J5YXBpIGZyb20gJ0AvYXBpL2NhdGVnb3J5L2NhdGVnb3J5LmpzJw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGxpc3Q6IFtdLA0KICAgICAgcGFnZTogMSwNCiAgICAgIGxpbWl0OiA1LA0KICAgICAgdG90YTogMCwNCiAgICAgIHNlYXJjaE9iajoge30sDQogICAgICBsaXN0TG9hZGluZzogZmFsc2UsDQogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwNCiAgICAgIHN5c01vdmllOiB7fSwNCiAgICAgIC8vIOW9seinhuWIhuexu+WIl+ihqA0KICAgICAgY2F0ZWdvcnlMaXN0OiBbXSwNCiAgICAgIHN5c0NhdGVnb3J5OiBbXSwNCiAgICAgIGZpbGV1cmw6ICcnLA0KICAgICAgbG9hZGluZzogZmFsc2UsDQogICAgICBWaWRlb2RpYWxvZ1Zpc2libGU6IGZhbHNlDQogICAgfQ0KICB9LA0KICBtb3VudGVkKCkgew0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIC8vIHRoaXMubGlzdExvYWRpbmc9dHJ1ZTsNCiAgICB0aGlzLmZldGNoUGFnZUxpc3QoKQ0KICAgIHRoaXMuZmluZEFsbCgpDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBjaWRmb3JtYXR0ZXIocm93LCBjb2x1bW4pIHsNCiAgICAgIC8vIDEu6YCa6L+H5Yik5pat6I635Y+W57G75Yir5ZCN56ewDQogICAgICAvLyBpZiAocm93LmNpZCA9PT0gMikgew0KICAgICAgLy8gICByZXR1cm4gJ+eUteW9sScNCiAgICAgIC8vIH0gZWxzZSBpZiAocm93LmNpZCA9PT0gMSkgew0KICAgICAgLy8gICByZXR1cm4gJ+eUteinhuWJpycNCiAgICAgIC8vIH0gZWxzZSBpZiAocm93LmNpZCA9PT0gMykgew0KICAgICAgLy8gICByZXR1cm4gJ+e7vOiJuicNCiAgICAgIC8vIH0gZWxzZSBpZiAocm93LmNpZCA9PT0gNCkgew0KICAgICAgLy8gICByZXR1cm4gJ+WKqOa8qycNCiAgICAgIC8vIH0gZWxzZSBpZiAocm93LmNpZCA9PT0gNSkgew0KICAgICAgLy8gICByZXR1cm4gJ+e9keWJpycNCiAgICAgIC8vIH0gZWxzZSBpZiAocm93LmNpZCA9PT0gNikgew0KICAgICAgLy8gICByZXR1cm4gJ+e6quW9leeJhycNCiAgICAgIC8vIH0gZWxzZSBpZiAocm93LmNpZCA9PT0gNykgew0KICAgICAgLy8gICByZXR1cm4gJ+iCpeeaguWJpycNCiAgICAgIC8vIH0gZWxzZSBpZiAocm93LmNpZCA9PT0gOCkgew0KICAgICAgLy8gICByZXR1cm4gJ+efreinhumikScNCiAgICAgIC8vIH0NCg0KICAgICAgLy8gMi7lrprkuYnkuIDkuKrnsbvliKvmmKDlsITooagNCiAgICAgIGNvbnN0IGNhdGVnb3J5TWFwID0gew0KICAgICAgICAxOiAn55S16KeG5YmnJywNCiAgICAgICAgMjogJ+eUteW9sScsDQogICAgICAgIDM6ICfnu7zoibonLA0KICAgICAgICA0OiAn5Yqo5ryrJywNCiAgICAgICAgNTogJ+e9keWJpycsDQogICAgICAgIDY6ICfnuqrlvZXniYcnLA0KICAgICAgICA3OiAn6IKl55qC5YmnJywNCiAgICAgICAgODogJ+efreinhumikScNCiAgICAgIH0NCiAgICAgIC8vIOS7juaYoOWwhOihqOS4reiOt+WPluexu+WIq+WQjeensO+8jOWmguaenGNpZOS4jeWtmOWcqOWImei/lOWbnifmnKrnn6UnDQogICAgICByZXR1cm4gY2F0ZWdvcnlNYXBbcm93LmNpZF0gfHwgJ+acquefpScNCiAgICB9LA0KICAgIHNob3dQbGF5UGFnZShyb3cpIHsNCiAgICAgIGNvbnNvbGUubG9nKHJvdy5pZCkNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvc3lzdGVtL2Fzc2lnblZpZGVvP2lkPScgKyByb3cuaWQpDQogICAgfSwNCiAgICBmaW5kQWxsKCkgew0KICAgICAgY2F0ZWdvcnlhcGkuZmluZEFsbCgpLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgIHRoaXMuY2F0ZWdvcnlMaXN0ID0gcmVzcG9uc2UuZGF0YQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGVkaXQoaWQpIHsNCiAgICAgIC8vIDEu5by55qGGDQogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlDQogICAgICAvLyAyLui1i+WAvA0KICAgICAgYXBpLmdldE1vdmllQnlJZChpZCkudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgdGhpcy5zeXNNb3ZpZSA9IHJlc3BvbnNlLmRhdGENCiAgICAgIH0pDQogICAgfSwNCiAgICAvLyDmlofku7blvIDlp4vkuIrkvKAs5byA5aeL5bGP5bmV6YGu572pDQogICAgaGFuZGxlQmVmb3JlVXBsb2FkKCkgew0KICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQ0KICAgIH0sDQogICAgLy8g5Zu+54mH5LiK5Lyg5oiQ5Yqf55qE6ZKp5a2Q5Ye95pWwDQogICAgaGFuZGxlSW1hZ2VTdWNjZXNzKHJlcywgZmlsZSkgew0KICAgICAgY29uc29sZS5sb2cocmVzKSAvLyDlvpfliLDnmoTmmK/lm77niYflnLDlnYANCiAgICAgIGNvbnNvbGUubG9nKGZpbGUpIC8vIOW+l+WIsOaYr+S4gOS4quWvueixoQ0KICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UNCiAgICAgIGlmIChmaWxlLnJlc3BvbnNlICE9PSAnJykgew0KICAgICAgICAvLyB0aGlzLnN5c01vdmllLmltYWdlID0gZmlsZS5yZXNwb25zZS5kYXRhOw0KICAgICAgICB0aGlzLnN5c01vdmllLmltYWdlID0gcmVzDQogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuc3lzTW92aWUuaW1hZ2UpDQogICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgIHR5cGU6ICdpbmZvJywNCiAgICAgICAgICBtZXNzYWdlOiAn5Zu+54mH5LiK5Lyg5oiQ5YqfJywNCiAgICAgICAgICBkdXJhdGlvbjogNjAwMA0KICAgICAgICB9KQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgdHlwZTogJ2luZm8nLA0KICAgICAgICAgIG1lc3NhZ2U6ICflm77niYfkuIrkvKDlpLHotKUnLA0KICAgICAgICAgIGR1cmF0aW9uOiA2MDAwDQogICAgICAgIH0pDQogICAgICB9DQogICAgfSwNCiAgICBoYW5kbGVWaWRlb1N1Y2Nlc3MocmVzLCBmaWxlKSB7DQogICAgICBpZiAoZmlsZS5yZXNwb25zZSAhPT0gJycpIHsNCiAgICAgICAgY29uc29sZS5sb2cocmVzKSAvLyDlvpfliLDnmoTmmK8NCiAgICAgICAgY29uc29sZS5sb2coJy0tLS0tLS0tLS0tLScpDQogICAgICAgIGNvbnNvbGUubG9nKGZpbGUpIC8vIOW+l+WIsOaYrw0KICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQ0KICAgICAgICB0aGlzLnN5c01vdmllLnBsYXlJZCA9IHJlcw0KICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICB0eXBlOiAnaW5mbycsDQogICAgICAgICAgbWVzc2FnZTogJ+inhumikeS4iuS8oOaIkOWKnycsDQogICAgICAgICAgZHVyYXRpb246IDYwMDANCiAgICAgICAgfSkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgIHR5cGU6ICdpbmZvJywNCiAgICAgICAgICBtZXNzYWdlOiAn6KeG6aKR5LiK5Lyg5aSx6LSlJywNCiAgICAgICAgICBkdXJhdGlvbjogNjAwMA0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgIH0sDQoNCiAgICBzYXZlT3JVcGRhdGUoKSB7DQogICAgICBpZiAodGhpcy5zeXNNb3ZpZS5pZCAhPSBudWxsKSB7DQogICAgICAgIHRoaXMudXBkYXRlTW92aWUoKQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5hZGRNb3ZpZSgpDQogICAgICB9DQogICAgfSwNCiAgICBhZGRNb3ZpZSgpIHsNCiAgICAgIGFwaS5hZGRNb3ZpZSh0aGlzLnN5c01vdmllKS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsDQogICAgICAgICAgbWVzc2FnZTogJ+a3u+WKoOaIkOWKnyEnDQogICAgICAgIH0pDQogICAgICAgIC8vIOWFs+mXreW8ueahhg0KICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZQ0KICAgICAgICAvLyDliLfmlrDliJfooagNCiAgICAgICAgdGhpcy5mZXRjaFBhZ2VMaXN0KCkNCiAgICAgIH0pDQogICAgfSwNCiAgICB1cGRhdGVNb3ZpZSgpIHsNCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuc3lzTW92aWUpDQogICAgICBhcGkudXBkYXRlTW92aWUodGhpcy5zeXNNb3ZpZSkudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLA0KICAgICAgICAgIG1lc3NhZ2U6ICfkv67mlLnmiJDlip8hJw0KICAgICAgICB9KQ0KICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXNwb25zZSkNCiAgICAgICAgLy8g5YWz6Zet5by55qGGDQogICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlDQogICAgICAgIC8vIOWIt+aWsOWIl+ihqA0KICAgICAgICB0aGlzLmZldGNoUGFnZUxpc3QoKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGFkZCgpIHsNCiAgICAgIHRoaXMuc3lzTW92aWUgPSB7fQ0KICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZQ0KICAgIH0sDQogICAgcmVtb3ZlRGF0YUJ5SWQoaWQpIHsNCiAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuawuOS5heWIoOmZpOivpeW9seinhiwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7DQogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywNCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsDQogICAgICAgIHR5cGU6ICd3YXJuaW5nJw0KICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgIGFwaS5yZW1vdmVNb3ZpZUJ5SWQoaWQpLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsDQogICAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5oiQ5YqfIScNCiAgICAgICAgICB9KQ0KICAgICAgICAgIHRoaXMuZmV0Y2hQYWdlTGlzdCgpDQogICAgICAgIH0pDQogICAgICB9KQ0KICAgIH0sDQogICAgcmVzZXREYXRhKCkgew0KICAgICAgLy8gMS7muIXnqbrmkJzntKLmnaHku7YNCiAgICAgIHRoaXMuc2VhcmNoT2JqID0ge30NCiAgICAgIC8vIDIu5YaN5qyh5Yi35paw5YiX6KGoDQogICAgICB0aGlzLmZldGNoUGFnZUxpc3QoKQ0KICAgIH0sDQogICAgZmV0Y2hQYWdlTGlzdChwYWdlID0gMSkgew0KICAgICAgdGhpcy5wYWdlID0gcGFnZQ0KICAgICAgYXBpDQogICAgICAgIC5nZXRNb3ZpZVBhZ2VJbmZvKHRoaXMucGFnZSwgdGhpcy5saW1pdCwgdGhpcy5zZWFyY2hPYmopDQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKQ0KICAgICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEucmVjb3Jkcw0KICAgICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLnRvdGFsDQogICAgICAgIH0pDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6LA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/views/system/sysMovie","sourcesContent":["<template>\r\n  <div v-loading=\"loading\" element-loading-text=\"文件上传中......\">\r\n    <!--查询表单-->\r\n    <div class=\"search-div\">\r\n      <el-form label-width=\"70px\" size=\"small\">\r\n        <el-row>\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"影视名称\">\r\n              <el-input\r\n                v-model=\"searchObj.name\"\r\n                style=\"width: 100%\"\r\n                placeholder=\"影视名称\"\r\n              />\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row style=\"display: flex\">\r\n          <el-button\r\n            type=\"primary\"\r\n            icon=\"el-icon-search\"\r\n            size=\"mini\"\r\n            @click=\"fetchPageList()\"\r\n          >搜索</el-button>\r\n          <el-button\r\n            icon=\"el-icon-refresh\"\r\n            size=\"mini\"\r\n            @click=\"resetData\"\r\n          >重置</el-button>\r\n        </el-row>\r\n      </el-form>\r\n    </div>\r\n\r\n    <!-- 工具条 -->\r\n    <div class=\"tools-div\">\r\n      <el-button\r\n        type=\"success\"\r\n        icon=\"el-icon-plus\"\r\n        size=\"mini\"\r\n        @click=\"add\"\r\n      >添 加</el-button>\r\n    </div>\r\n\r\n    <el-dialog title=\"添加/修改\" :visible.sync=\"dialogVisible\" width=\"40%\">\r\n      <el-form\r\n        ref=\"dataForm\"\r\n        :model=\"sysMovie\"\r\n        label-width=\"150px\"\r\n        size=\"small\"\r\n        style=\"padding-right: 40px\"\r\n      >\r\n        <el-form-item label=\"影视名称\">\r\n          <el-input v-model=\"sysMovie.name\" />\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"所属栏目\" prop=\"cid\">\r\n          <el-select v-model=\"sysMovie.cid\" placeholder=\"请输入影视分类\">\r\n            <el-option\r\n              v-for=\"item in categoryList\"\r\n              :key=\"item.id\"\r\n              :label=\"item.name\"\r\n              :value=\"item.id\"\r\n            />\r\n          </el-select>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"关键字\" prop=\"keyword\">\r\n          <el-input v-model=\"sysMovie.keyword\" />\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"导演\" prop=\"director\">\r\n          <el-input v-model=\"sysMovie.director\" />\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"演员\" prop=\"actor\">\r\n          <el-input v-model=\"sysMovie.actor\" />\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"影视图片\" prop=\"image\">\r\n          <el-upload\r\n            class=\"upload-demo\"\r\n            name=\"uploadImage\"\r\n            action=\"http://localhost:8085/admin/system/upload/uploadImage\"\r\n            :limit=\"1\"\r\n            :on-success=\"handleImageSuccess\"\r\n            :before-upload=\"handleBeforeUpload\"\r\n            :show-file-list=\"false\"\r\n          >\r\n            <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n          </el-upload>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"影视文件\" prop=\"video\">\r\n          <el-upload\r\n            class=\"upload-demo\"\r\n            name=\"uploadVideo\"\r\n            action=\"http://localhost:8085/admin/system/upload/uploadVideo\"\r\n            :limit=\"1\"\r\n            :on-success=\"handleVideoSuccess\"\r\n            :before-upload=\"handleBeforeUpload\"\r\n            :show-file-list=\"false\"\r\n          >\r\n            <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n          </el-upload>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"影视描述\" prop=\"description\">\r\n          <el-input v-model=\"sysMovie.description\" />\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button\r\n          size=\"small\"\r\n          icon=\"el-icon-refresh-right\"\r\n          @click=\"dialogVisible = false\"\r\n        >取 消</el-button>\r\n        <el-button\r\n          size=\"small\"\r\n          type=\"primary\"\r\n          icon=\"el-icon-check\"\r\n          @click=\"saveOrUpdate()\"\r\n        >确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <!-- 表格 -->\r\n    <el-table\r\n      v-loading=\"listLoading\"\r\n      :data=\"list\"\r\n      stripe\r\n      border\r\n      style=\"width: 100%; margin-top: 10px\"\r\n    >\r\n      <el-table-column label=\"序号\" width=\"70\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          {{ (page - 1) * limit + scope.$index + 1 }}\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <el-table-column prop=\"name\" label=\"影视名称\" />\r\n      <el-table-column prop=\"cid\" label=\"影视类型\" :formatter=\"cidformatter\" />\r\n      <el-table-column prop=\"director\" label=\"导演\" width=\"160\" />\r\n      <el-table-column prop=\"image\" label=\"剧照\">\r\n        <template slot-scope=\"scope\">\r\n          <viewer>\r\n            <img :src=\"scope.row.image\" alt=\"\" style=\"height: 80px\">\r\n          </viewer>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" width=\"200\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            type=\"primary\"\r\n            icon=\"el-icon-edit\"\r\n            size=\"mini\"\r\n            title=\"修改\"\r\n            @click=\"edit(scope.row.id)\"\r\n          />\r\n          <el-button\r\n            type=\"danger\"\r\n            icon=\"el-icon-delete\"\r\n            size=\"mini\"\r\n            title=\"删除\"\r\n            @click=\"removeDataById(scope.row.id)\"\r\n          />\r\n          <el-button\r\n            type=\"warning\"\r\n            icon=\"el-icon-baseball\"\r\n            size=\"mini\"\r\n            title=\"播放视频\"\r\n            @click=\"showPlayPage(scope.row)\"\r\n          />\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 分页组件 -->\r\n    <el-pagination\r\n      :current-page=\"page\"\r\n      :total=\"total\"\r\n      :page-size=\"limit\"\r\n      style=\"padding: 30px 0; text-align: center\"\r\n      layout=\"total, prev, pager, next, jumper\"\r\n      @current-change=\"fetchPageList\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// 导入\r\nimport api from '@/api/movie/movie.js'\r\n\r\n// 导入分类\r\nimport categoryapi from '@/api/category/category.js'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      list: [],\r\n      page: 1,\r\n      limit: 5,\r\n      tota: 0,\r\n      searchObj: {},\r\n      listLoading: false,\r\n      dialogVisible: false,\r\n      sysMovie: {},\r\n      // 影视分类列表\r\n      categoryList: [],\r\n      sysCategory: [],\r\n      fileurl: '',\r\n      loading: false,\r\n      VideodialogVisible: false\r\n    }\r\n  },\r\n  mounted() {\r\n  },\r\n  created() {\r\n    // this.listLoading=true;\r\n    this.fetchPageList()\r\n    this.findAll()\r\n  },\r\n  methods: {\r\n    cidformatter(row, column) {\r\n      // 1.通过判断获取类别名称\r\n      // if (row.cid === 2) {\r\n      //   return '电影'\r\n      // } else if (row.cid === 1) {\r\n      //   return '电视剧'\r\n      // } else if (row.cid === 3) {\r\n      //   return '综艺'\r\n      // } else if (row.cid === 4) {\r\n      //   return '动漫'\r\n      // } else if (row.cid === 5) {\r\n      //   return '网剧'\r\n      // } else if (row.cid === 6) {\r\n      //   return '纪录片'\r\n      // } else if (row.cid === 7) {\r\n      //   return '肥皂剧'\r\n      // } else if (row.cid === 8) {\r\n      //   return '短视频'\r\n      // }\r\n\r\n      // 2.定义一个类别映射表\r\n      const categoryMap = {\r\n        1: '电视剧',\r\n        2: '电影',\r\n        3: '综艺',\r\n        4: '动漫',\r\n        5: '网剧',\r\n        6: '纪录片',\r\n        7: '肥皂剧',\r\n        8: '短视频'\r\n      }\r\n      // 从映射表中获取类别名称，如果cid不存在则返回'未知'\r\n      return categoryMap[row.cid] || '未知'\r\n    },\r\n    showPlayPage(row) {\r\n      console.log(row.id)\r\n      this.$router.push('/system/assignVideo?id=' + row.id)\r\n    },\r\n    findAll() {\r\n      categoryapi.findAll().then((response) => {\r\n        this.categoryList = response.data\r\n      })\r\n    },\r\n    edit(id) {\r\n      // 1.弹框\r\n      this.dialogVisible = true\r\n      // 2.赋值\r\n      api.getMovieById(id).then((response) => {\r\n        this.sysMovie = response.data\r\n      })\r\n    },\r\n    // 文件开始上传,开始屏幕遮罩\r\n    handleBeforeUpload() {\r\n      this.loading = true\r\n    },\r\n    // 图片上传成功的钩子函数\r\n    handleImageSuccess(res, file) {\r\n      console.log(res) // 得到的是图片地址\r\n      console.log(file) // 得到是一个对象\r\n      this.loading = false\r\n      if (file.response !== '') {\r\n        // this.sysMovie.image = file.response.data;\r\n        this.sysMovie.image = res\r\n        console.log(this.sysMovie.image)\r\n        this.$message({\r\n          type: 'info',\r\n          message: '图片上传成功',\r\n          duration: 6000\r\n        })\r\n      } else {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '图片上传失败',\r\n          duration: 6000\r\n        })\r\n      }\r\n    },\r\n    handleVideoSuccess(res, file) {\r\n      if (file.response !== '') {\r\n        console.log(res) // 得到的是\r\n        console.log('------------')\r\n        console.log(file) // 得到是\r\n        this.loading = false\r\n        this.sysMovie.playId = res\r\n        this.$message({\r\n          type: 'info',\r\n          message: '视频上传成功',\r\n          duration: 6000\r\n        })\r\n      } else {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '视频上传失败',\r\n          duration: 6000\r\n        })\r\n      }\r\n    },\r\n\r\n    saveOrUpdate() {\r\n      if (this.sysMovie.id != null) {\r\n        this.updateMovie()\r\n      } else {\r\n        this.addMovie()\r\n      }\r\n    },\r\n    addMovie() {\r\n      api.addMovie(this.sysMovie).then((response) => {\r\n        this.$message({\r\n          type: 'success',\r\n          message: '添加成功!'\r\n        })\r\n        // 关闭弹框\r\n        this.dialogVisible = false\r\n        // 刷新列表\r\n        this.fetchPageList()\r\n      })\r\n    },\r\n    updateMovie() {\r\n      console.log(this.sysMovie)\r\n      api.updateMovie(this.sysMovie).then((response) => {\r\n        this.$message({\r\n          type: 'success',\r\n          message: '修改成功!'\r\n        })\r\n        // console.log(response)\r\n        // 关闭弹框\r\n        this.dialogVisible = false\r\n        // 刷新列表\r\n        this.fetchPageList()\r\n      })\r\n    },\r\n    add() {\r\n      this.sysMovie = {}\r\n      this.dialogVisible = true\r\n    },\r\n    removeDataById(id) {\r\n      this.$confirm('此操作将永久删除该影视, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        api.removeMovieById(id).then((response) => {\r\n          this.$message({\r\n            type: 'success',\r\n            message: '删除成功!'\r\n          })\r\n          this.fetchPageList()\r\n        })\r\n      })\r\n    },\r\n    resetData() {\r\n      // 1.清空搜索条件\r\n      this.searchObj = {}\r\n      // 2.再次刷新列表\r\n      this.fetchPageList()\r\n    },\r\n    fetchPageList(page = 1) {\r\n      this.page = page\r\n      api\r\n        .getMoviePageInfo(this.page, this.limit, this.searchObj)\r\n        .then((response) => {\r\n          console.log(response)\r\n          this.list = response.data.records\r\n          this.total = response.data.total\r\n        })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n</style>\r\n"]}]}