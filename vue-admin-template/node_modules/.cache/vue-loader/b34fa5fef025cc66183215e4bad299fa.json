{"remainingRequest":"D:\\传出\\xm\\第六天\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\传出\\xm\\第六天\\vue-admin-template\\src\\views\\system\\sysMovie\\list.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\传出\\xm\\第六天\\vue-admin-template\\src\\views\\system\\sysMovie\\list.vue","mtime":1727320152344},{"path":"D:\\传出\\xm\\第六天\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1726969924886},{"path":"D:\\传出\\xm\\第六天\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js","mtime":1726969926736},{"path":"D:\\传出\\xm\\第六天\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1726969924886},{"path":"D:\\传出\\xm\\第六天\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js","mtime":1726969927562}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovLyDlr7zlhaUNCmltcG9ydCBhcGkgZnJvbSAiQC9hcGkvbW92aWUvbW92aWUuanMiOw0KDQovLyDlr7zlhaXliIbnsbsNCmltcG9ydCBjYXRlZ29yeWFwaSBmcm9tICJAL2FwaS9jYXRlZ29yeS9jYXRlZ29yeS5qcyI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgbGlzdDogW10sDQogICAgICBwYWdlOiAxLA0KICAgICAgbGltaXQ6IDUsDQogICAgICB0b3RhOiAwLA0KICAgICAgc2VhcmNoT2JqOiB7fSwNCiAgICAgIGxpc3RMb2FkaW5nOiBmYWxzZSwNCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLA0KICAgICAgc3lzTW92aWU6IHt9LA0KICAgICAgLy8g5b2x6KeG5YiG57G75YiX6KGoDQogICAgICBjYXRlZ29yeUxpc3Q6IFtdLA0KICAgICAgZmlsZXVybDogIiIsDQogICAgICBsb2FkaW5nOmZhbHNlLA0KICAgICAgVmlkZW9kaWFsb2dWaXNpYmxlOmZhbHNlDQogICAgfTsNCiAgfSwNCiAgbW91bnRlZCgpew0KICAgIA0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIC8vdGhpcy5saXN0TG9hZGluZz10cnVlOw0KICAgIHRoaXMuZmV0Y2hQYWdlTGlzdCgpOw0KICAgIHRoaXMuZmluZEFsbCgpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgY2lkZm9ybWF0dGVyKHJvdyxjbG91bW4pew0KICAgICAgIGlmKHJvdy5jaWQ9PTIpew0KICAgICAgICAgIHJldHVybiAn55S15b2xJw0KICAgICAgIH0NCiAgICAgICBlbHNlIGlmKHJvdy5jaWQ9PTEpew0KICAgICAgICAgcmV0dXJuICfnlLXop4bliacnDQogICAgICAgfQ0KICAgIH0sDQogICAgc2hvd1BsYXlQYWdlKHJvdykgew0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9zeXN0ZW0vYXNzaWduVmlkZW8/aWQ9Jytyb3cuaWQpOw0KfSwNCiAgICBmaW5kQWxsKCkgew0KICAgICAgY2F0ZWdvcnlhcGkuZmluZEFsbCgpLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgIHRoaXMuY2F0ZWdvcnlMaXN0ID0gcmVzcG9uc2UuZGF0YTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgZWRpdChpZCkgew0KICAgICAgLy8xLuW8ueahhg0KICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsNCiAgICAgIC8vMi7otYvlgLwNCiAgICAgIGFwaS5nZXRNb3ZpZUJ5SWQoaWQpLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgIHRoaXMuc3lzTW92aWUgPSByZXNwb25zZS5kYXRhOw0KICAgICAgfSk7DQogICAgfSwNCiAgICAvL+aWh+S7tuW8gOWni+S4iuS8oCzlvIDlp4vlsY/luZXpga7nvakNCiAgICBoYW5kbGVCZWZvcmVVcGxvYWQoKSB7DQogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOw0KICAgIH0sDQogICAgLy/lm77niYfkuIrkvKDmiJDlip/nmoTpkqnlrZDlh73mlbANCiAgICBoYW5kbGVJbWFnZVN1Y2Nlc3MocmVzLCBmaWxlKSB7DQoNCiAgICAgIGNvbnNvbGUubG9nKHJlcyk7ICAvLyDlvpfliLDnmoTmmK/lm77niYflnLDlnYANCiAgICAgIGNvbnNvbGUubG9nKGZpbGUpOyAgLy8g5b6X5Yiw5piv5LiA5Liq5a+56LGhICANCg0KICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7DQogICAgICBpZiAoZmlsZS5yZXNwb25zZSAhPSAiIikgew0KICAgICAgICAvLyB0aGlzLnN5c01vdmllLmltYWdlID0gZmlsZS5yZXNwb25zZS5kYXRhOw0KICAgICAgICB0aGlzLnN5c01vdmllLmltYWdlID0gZmlsZS5yZXNwb25zZS5kYXRhOw0KICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnN5c01vdmllLmltYWdlKTsNCg0KICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICB0eXBlOiAiaW5mbyIsDQogICAgICAgICAgbWVzc2FnZTogIuWbvueJh+S4iuS8oOaIkOWKnyIsDQogICAgICAgICAgZHVyYXRpb246IDYwMDAsDQogICAgICAgIH0pOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgdHlwZTogImluZm8iLA0KICAgICAgICAgIG1lc3NhZ2U6ICLlm77niYfkuIrkvKDlpLHotKUiLA0KICAgICAgICAgIGR1cmF0aW9uOiA2MDAwLA0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGhhbmRsZVZpZGVvU3VjY2VzcyhyZXMsIGZpbGUpIHsNCiAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsNCiAgICAgIGlmIChmaWxlLnJlc3BvbnNlICE9ICIiKSB7DQoNCiAgICAgICAgY29uc29sZS5sb2cocmVzKTsgIC8vIOW+l+WIsOeahOaYryANCiAgICAgICAgY29uc29sZS5sb2coJy0tLS0tLS0tLS0tLScpDQogICAgICAgIGNvbnNvbGUubG9nKGZpbGUpOyAgLy8g5b6X5Yiw5pivDQoNCiAgICAgICAgdGhpcy5zeXNNb3ZpZS5wbGF5SWQgPSBmaWxlLnJlc3BvbnNlLmRhdGE7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgIHR5cGU6ICJpbmZvIiwNCiAgICAgICAgICBtZXNzYWdlOiAi6KeG6aKR5LiK5Lyg5oiQ5YqfIiwNCiAgICAgICAgICBkdXJhdGlvbjogNjAwMCwNCiAgICAgICAgfSk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICB0eXBlOiAiaW5mbyIsDQogICAgICAgICAgbWVzc2FnZTogIuinhumikeS4iuS8oOWksei0pSIsDQogICAgICAgICAgZHVyYXRpb246IDYwMDAsDQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0sDQoNCiAgICBzYXZlT3JVcGRhdGUoKSB7DQogICAgICBpZiAodGhpcy5zeXNNb3ZpZS5pZCAhPSBudWxsKSB7DQogICAgICAgIHRoaXMudXBkYXRlTW92aWUoKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuYWRkTW92aWUoKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGFkZE1vdmllKCkgew0KICAgICAgYXBpLmFkZE1vdmllKHRoaXMuc3lzTW92aWUpLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwNCiAgICAgICAgICBtZXNzYWdlOiAi5re75Yqg5oiQ5YqfISIsDQogICAgICAgIH0pOw0KICAgICAgICAvL+WFs+mXreW8ueahhg0KICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsNCiAgICAgICAgLy8g5Yi35paw5YiX6KGoDQogICAgICAgIHRoaXMuZmV0Y2hQYWdlTGlzdCgpOw0KICAgICAgfSk7DQogICAgfSwNCiAgICB1cGRhdGVNb3ZpZSgpIHsNCiAgICAgIGFwaS51cGRhdGVNb3ZpZSh0aGlzLnN5c01vdmllKS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsDQogICAgICAgICAgbWVzc2FnZTogIuS/ruaUueaIkOWKnyEiLA0KICAgICAgICB9KTsNCiAgICAgICAgLy/lhbPpl63lvLnmoYYNCiAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7DQogICAgICAgIC8vIOWIt+aWsOWIl+ihqA0KICAgICAgICB0aGlzLmZldGNoUGFnZUxpc3QoKTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgYWRkKCkgew0KICAgICAgdGhpcy5zeXNNb3ZpZSA9IHt9Ow0KICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsNCiAgICAgIA0KICAgIH0sDQogICAgcmVtb3ZlRGF0YUJ5SWQoaWQpIHsNCiAgICAgIHRoaXMuJGNvbmZpcm0oIuatpOaTjeS9nOWwhuawuOS5heWIoOmZpOivpeW9seinhiwg5piv5ZCm57un57utPyIsICLmj5DnpLoiLCB7DQogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIiwNCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIsDQogICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwNCiAgICAgIH0pLnRoZW4oKCkgPT4gew0KICAgICAgICBhcGkucmVtb3ZlTW92aWVCeUlkKGlkKS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLA0KICAgICAgICAgICAgbWVzc2FnZTogIuWIoOmZpOaIkOWKnyEiLA0KICAgICAgICAgIH0pOw0KICAgICAgICAgIHRoaXMuZmV0Y2hQYWdlTGlzdCgpOw0KICAgICAgICB9KTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgcmVzZXREYXRhKCkgew0KICAgICAgLy8xLua4heepuuaQnOe0ouadoeS7tg0KICAgICAgdGhpcy5zZWFyY2hPYmogPSB7fTsNCiAgICAgIC8vMi7lho3mrKHliLfmlrDliJfooagNCiAgICAgIHRoaXMuZmV0Y2hQYWdlTGlzdCgpOw0KICAgIH0sDQogICAgZmV0Y2hQYWdlTGlzdChwYWdlID0gMSkgew0KICAgICAgdGhpcy5wYWdlID0gcGFnZTsNCiAgICAgIGFwaQ0KICAgICAgICAuZ2V0TW92aWVQYWdlSW5mbyh0aGlzLnBhZ2UsIHRoaXMubGltaXQsIHRoaXMuc2VhcmNoT2JqKQ0KICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgICAvLyB0aGlzLmxpc3RMb2FkaW5nPWZhbHNlOw0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsNCiAgICAgICAgICB0aGlzLmxpc3QgPSByZXNwb25zZS5kYXRhLnJlY29yZHM7DQogICAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWw7DQogICAgICAgIH0pOw0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0MA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/views/system/sysMovie","sourcesContent":["<template>\r\n  <div v-loading=\"loading\" element-loading-text=\"文件上传中......\">\r\n    <!--查询表单-->\r\n    <div class=\"search-div\">\r\n      <el-form label-width=\"70px\" size=\"small\">\r\n        <el-row>\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"影视名称\">\r\n              <el-input\r\n                style=\"width: 100%\"\r\n                v-model=\"searchObj.name\"\r\n                placeholder=\"影视名称\"\r\n              ></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row style=\"display: flex\">\r\n          <el-button\r\n            type=\"primary\"\r\n            icon=\"el-icon-search\"\r\n            size=\"mini\"\r\n            @click=\"fetchPageList()\"\r\n            >搜索</el-button\r\n          >\r\n          <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetData\"\r\n            >重置</el-button\r\n          >\r\n        </el-row>\r\n      </el-form>\r\n    </div>\r\n\r\n    <!-- 工具条 -->\r\n    <div class=\"tools-div\">\r\n      <el-button type=\"success\" icon=\"el-icon-plus\" size=\"mini\" @click=\"add\"\r\n        >添 加</el-button\r\n      >\r\n    </div>\r\n\r\n    <el-dialog title=\"添加/修改\" :visible.sync=\"dialogVisible\" width=\"40%\">\r\n      <el-form\r\n        ref=\"dataForm\"\r\n        :model=\"sysMovie\"\r\n        label-width=\"150px\"\r\n        size=\"small\"\r\n        style=\"padding-right: 40px\"\r\n      >\r\n        <el-form-item label=\"影视名称\">\r\n          <el-input v-model=\"sysMovie.name\" />\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"所属栏目\" prop=\"cid\">\r\n          <el-select v-model=\"sysMovie.cid\" placeholder=\"请输入影视分类\">\r\n            <el-option\r\n              v-for=\"item in categoryList\"\r\n              :key=\"item.id\"\r\n              :label=\"item.name\"\r\n              :value=\"item.id\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"关键字\" prop=\"keyword\">\r\n          <el-input v-model=\"sysMovie.keyword\"></el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"导演\" prop=\"director\">\r\n          <el-input v-model=\"sysMovie.director\"></el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"演员\" prop=\"actor\">\r\n          <el-input v-model=\"sysMovie.actor\"></el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"影视图片\" prop=\"image\">\r\n          <el-upload\r\n            class=\"upload-demo\"\r\n            name=\"uploadImage\"\r\n            action=\"http://localhost:8085/admin/system/upload/uploadImage\"\r\n            :limit=\"1\"\r\n            :on-success=\"handleImageSuccess\"\r\n            :before-upload=\"handleBeforeUpload\"\r\n            :show-file-list=\"false\"\r\n          >\r\n            <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n          </el-upload>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"影视文件\" prop=\"video\">\r\n          <el-upload\r\n            class=\"upload-demo\"\r\n            name=\"uploadVideo\"\r\n            action=\"http://localhost:8085/admin/system/upload/uploadVideo\"\r\n            :limit=\"1\"\r\n            :on-success=\"handleVideoSuccess\"\r\n            :before-upload=\"handleBeforeUpload\"\r\n            :show-file-list=\"false\"\r\n          >\r\n            <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n          </el-upload>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"影视描述\" prop=\"description\">\r\n          <el-input v-model=\"sysMovie.description\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button\r\n          @click=\"dialogVisible = false\"\r\n          size=\"small\"\r\n          icon=\"el-icon-refresh-right\"\r\n          >取 消</el-button\r\n        >\r\n        <el-button\r\n          type=\"primary\"\r\n          icon=\"el-icon-check\"\r\n          @click=\"saveOrUpdate()\"\r\n          size=\"small\"\r\n          >确 定</el-button\r\n        >\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <!-- 表格 -->\r\n    <el-table\r\n      v-loading=\"listLoading\"\r\n      :data=\"list\"\r\n      stripe\r\n      border\r\n      style=\"width: 100%; margin-top: 10px\"\r\n    >\r\n      <el-table-column label=\"序号\" width=\"70\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          {{ (page - 1) * limit + scope.$index + 1 }}\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <el-table-column prop=\"name\" label=\"影视名称\" />\r\n      <el-table-column prop=\"cid\" label=\"影视类型\" :formatter=\"cidformatter\" />\r\n      <el-table-column prop=\"director\" label=\"导演\" width=\"160\" />\r\n\r\n      <!-- <el-table-column prop=\"image\" label=\"剧照\">\r\n        <template slot-scope=\"scope\">\r\n          {{scope.row.image}}\r\n          <viewer>\r\n            <img :src=\"scope.row.image\" alt=\"\" style=\"height: 80px\" />\r\n          </viewer>\r\n        </template>\r\n      </el-table-column> -->\r\n\r\n      <el-table-column prop=\"image\" label=\"剧照\">\r\n        <template slot-scope=\"scope\">\r\n        <viewer>\r\n          <img :src=\"scope.row.image\" alt=\"\" style=\"height: 80px\" />\r\n        </viewer>\r\n        </template>\r\n           \r\n      </el-table-column>\r\n\r\n\r\n      <el-table-column label=\"操作\" width=\"200\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            type=\"primary\"\r\n            icon=\"el-icon-edit\"\r\n            size=\"mini\"\r\n            @click=\"edit(scope.row.id)\"\r\n            title=\"修改\"\r\n          />\r\n          <el-button\r\n            type=\"danger\"\r\n            icon=\"el-icon-delete\"\r\n            size=\"mini\"\r\n            @click=\"removeDataById(scope.row.id)\"\r\n            title=\"删除\"\r\n          />\r\n          <el-button\r\n            type=\"warning\"\r\n            icon=\"el-icon-baseball\"\r\n            size=\"mini\"\r\n            @click=\"showPlayPage(scope.row)\"\r\n            title=\"播放视频\"\r\n          />\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 分页组件 -->\r\n    <el-pagination\r\n      :current-page=\"page\"\r\n      :total=\"total\"\r\n      :page-size=\"limit\"\r\n      style=\"padding: 30px 0; text-align: center\"\r\n      layout=\"total, prev, pager, next, jumper\"\r\n      @current-change=\"fetchPageList\"\r\n    />\r\n\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// 导入\r\nimport api from \"@/api/movie/movie.js\";\r\n\r\n// 导入分类\r\nimport categoryapi from \"@/api/category/category.js\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      list: [],\r\n      page: 1,\r\n      limit: 5,\r\n      tota: 0,\r\n      searchObj: {},\r\n      listLoading: false,\r\n      dialogVisible: false,\r\n      sysMovie: {},\r\n      // 影视分类列表\r\n      categoryList: [],\r\n      fileurl: \"\",\r\n      loading:false,\r\n      VideodialogVisible:false\r\n    };\r\n  },\r\n  mounted(){\r\n    \r\n  },\r\n  created() {\r\n    //this.listLoading=true;\r\n    this.fetchPageList();\r\n    this.findAll();\r\n  },\r\n  methods: {\r\n    cidformatter(row,cloumn){\r\n       if(row.cid==2){\r\n          return '电影'\r\n       }\r\n       else if(row.cid==1){\r\n         return '电视剧'\r\n       }\r\n    },\r\n    showPlayPage(row) {\r\n      this.$router.push('/system/assignVideo?id='+row.id);\r\n},\r\n    findAll() {\r\n      categoryapi.findAll().then((response) => {\r\n        this.categoryList = response.data;\r\n      });\r\n    },\r\n    edit(id) {\r\n      //1.弹框\r\n      this.dialogVisible = true;\r\n      //2.赋值\r\n      api.getMovieById(id).then((response) => {\r\n        this.sysMovie = response.data;\r\n      });\r\n    },\r\n    //文件开始上传,开始屏幕遮罩\r\n    handleBeforeUpload() {\r\n      this.loading = true;\r\n    },\r\n    //图片上传成功的钩子函数\r\n    handleImageSuccess(res, file) {\r\n\r\n      console.log(res);  // 得到的是图片地址\r\n      console.log(file);  // 得到是一个对象  \r\n\r\n      this.loading = false;\r\n      if (file.response != \"\") {\r\n        // this.sysMovie.image = file.response.data;\r\n        this.sysMovie.image = file.response.data;\r\n        console.log(this.sysMovie.image);\r\n\r\n        this.$message({\r\n          type: \"info\",\r\n          message: \"图片上传成功\",\r\n          duration: 6000,\r\n        });\r\n      } else {\r\n        this.$message({\r\n          type: \"info\",\r\n          message: \"图片上传失败\",\r\n          duration: 6000,\r\n        });\r\n      }\r\n    },\r\n    handleVideoSuccess(res, file) {\r\n       this.loading = false;\r\n      if (file.response != \"\") {\r\n\r\n        console.log(res);  // 得到的是 \r\n        console.log('------------')\r\n        console.log(file);  // 得到是\r\n\r\n        this.sysMovie.playId = file.response.data;\r\n        this.$message({\r\n          type: \"info\",\r\n          message: \"视频上传成功\",\r\n          duration: 6000,\r\n        });\r\n      } else {\r\n        this.$message({\r\n          type: \"info\",\r\n          message: \"视频上传失败\",\r\n          duration: 6000,\r\n        });\r\n      }\r\n    },\r\n\r\n    saveOrUpdate() {\r\n      if (this.sysMovie.id != null) {\r\n        this.updateMovie();\r\n      } else {\r\n        this.addMovie();\r\n      }\r\n    },\r\n    addMovie() {\r\n      api.addMovie(this.sysMovie).then((response) => {\r\n        this.$message({\r\n          type: \"success\",\r\n          message: \"添加成功!\",\r\n        });\r\n        //关闭弹框\r\n        this.dialogVisible = false;\r\n        // 刷新列表\r\n        this.fetchPageList();\r\n      });\r\n    },\r\n    updateMovie() {\r\n      api.updateMovie(this.sysMovie).then((response) => {\r\n        this.$message({\r\n          type: \"success\",\r\n          message: \"修改成功!\",\r\n        });\r\n        //关闭弹框\r\n        this.dialogVisible = false;\r\n        // 刷新列表\r\n        this.fetchPageList();\r\n      });\r\n    },\r\n    add() {\r\n      this.sysMovie = {};\r\n      this.dialogVisible = true;\r\n      \r\n    },\r\n    removeDataById(id) {\r\n      this.$confirm(\"此操作将永久删除该影视, 是否继续?\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      }).then(() => {\r\n        api.removeMovieById(id).then((response) => {\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"删除成功!\",\r\n          });\r\n          this.fetchPageList();\r\n        });\r\n      });\r\n    },\r\n    resetData() {\r\n      //1.清空搜索条件\r\n      this.searchObj = {};\r\n      //2.再次刷新列表\r\n      this.fetchPageList();\r\n    },\r\n    fetchPageList(page = 1) {\r\n      this.page = page;\r\n      api\r\n        .getMoviePageInfo(this.page, this.limit, this.searchObj)\r\n        .then((response) => {\r\n          // this.listLoading=false;\r\n          // console.log(response);\r\n          this.list = response.data.records;\r\n          this.total = response.data.total;\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n</style>"]}]}