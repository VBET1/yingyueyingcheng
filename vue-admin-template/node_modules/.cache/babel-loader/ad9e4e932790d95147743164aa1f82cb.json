{"remainingRequest":"D:\\传出\\xm\\第六天\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js!D:\\传出\\xm\\第六天\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\传出\\xm\\第六天\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\传出\\xm\\第六天\\vue-admin-template\\src\\views\\system\\sysMovie\\list.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\传出\\xm\\第六天\\vue-admin-template\\src\\views\\system\\sysMovie\\list.vue","mtime":1727401231669},{"path":"D:\\传出\\xm\\第六天\\vue-admin-template\\babel.config.js","mtime":1726969584090},{"path":"D:\\传出\\xm\\第六天\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1726969924886},{"path":"D:\\传出\\xm\\第六天\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js","mtime":1726969926736},{"path":"D:\\传出\\xm\\第六天\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1726969924886},{"path":"D:\\传出\\xm\\第六天\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js","mtime":1726969927562}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIOWvvOWFpQppbXBvcnQgYXBpIGZyb20gJ0AvYXBpL21vdmllL21vdmllLmpzJzsKCi8vIOWvvOWFpeWIhuexuwppbXBvcnQgY2F0ZWdvcnlhcGkgZnJvbSAnQC9hcGkvY2F0ZWdvcnkvY2F0ZWdvcnkuanMnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxpc3Q6IFtdLAogICAgICBwYWdlOiAxLAogICAgICBsaW1pdDogNSwKICAgICAgdG90YTogMCwKICAgICAgc2VhcmNoT2JqOiB7fSwKICAgICAgbGlzdExvYWRpbmc6IGZhbHNlLAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgc3lzTW92aWU6IHt9LAogICAgICAvLyDlvbHop4bliIbnsbvliJfooagKICAgICAgY2F0ZWdvcnlMaXN0OiBbXSwKICAgICAgZmlsZXVybDogJycsCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBWaWRlb2RpYWxvZ1Zpc2libGU6IGZhbHNlCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHt9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICAvLyB0aGlzLmxpc3RMb2FkaW5nPXRydWU7CiAgICB0aGlzLmZldGNoUGFnZUxpc3QoKTsKICAgIHRoaXMuZmluZEFsbCgpOwogIH0sCiAgbWV0aG9kczogewogICAgY2lkZm9ybWF0dGVyOiBmdW5jdGlvbiBjaWRmb3JtYXR0ZXIocm93LCBjbG91bW4pIHsKICAgICAgaWYgKHJvdy5jaWQgPT09IDIpIHsKICAgICAgICByZXR1cm4gJ+eUteW9sSc7CiAgICAgIH0gZWxzZSBpZiAocm93LmNpZCA9PT0gMSkgewogICAgICAgIHJldHVybiAn55S16KeG5YmnJzsKICAgICAgfQogICAgfSwKICAgIHNob3dQbGF5UGFnZTogZnVuY3Rpb24gc2hvd1BsYXlQYWdlKHJvdykgewogICAgICBjb25zb2xlLmxvZyhyb3cuaWQpOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3N5c3RlbS9hc3NpZ25WaWRlbz9pZD0nICsgcm93LmlkKTsKICAgIH0sCiAgICBmaW5kQWxsOiBmdW5jdGlvbiBmaW5kQWxsKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBjYXRlZ29yeWFwaS5maW5kQWxsKCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpcy5jYXRlZ29yeUxpc3QgPSByZXNwb25zZS5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICBlZGl0OiBmdW5jdGlvbiBlZGl0KGlkKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICAvLyAxLuW8ueahhgogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgICAvLyAyLui1i+WAvAogICAgICBhcGkuZ2V0TW92aWVCeUlkKGlkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMi5zeXNNb3ZpZSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOaWh+S7tuW8gOWni+S4iuS8oCzlvIDlp4vlsY/luZXpga7nvakKICAgIGhhbmRsZUJlZm9yZVVwbG9hZDogZnVuY3Rpb24gaGFuZGxlQmVmb3JlVXBsb2FkKCkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgfSwKICAgIC8vIOWbvueJh+S4iuS8oOaIkOWKn+eahOmSqeWtkOWHveaVsAogICAgaGFuZGxlSW1hZ2VTdWNjZXNzOiBmdW5jdGlvbiBoYW5kbGVJbWFnZVN1Y2Nlc3MocmVzLCBmaWxlKSB7CiAgICAgIGNvbnNvbGUubG9nKHJlcyk7IC8vIOW+l+WIsOeahOaYr+WbvueJh+WcsOWdgAogICAgICBjb25zb2xlLmxvZyhmaWxlKTsgLy8g5b6X5Yiw5piv5LiA5Liq5a+56LGhCiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICBpZiAoZmlsZS5yZXNwb25zZSAhPT0gJycpIHsKICAgICAgICAvLyB0aGlzLnN5c01vdmllLmltYWdlID0gZmlsZS5yZXNwb25zZS5kYXRhOwogICAgICAgIHRoaXMuc3lzTW92aWUuaW1hZ2UgPSByZXM7CiAgICAgICAgY29uc29sZS5sb2codGhpcy5zeXNNb3ZpZS5pbWFnZSk7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICBtZXNzYWdlOiAn5Zu+54mH5LiK5Lyg5oiQ5YqfJywKICAgICAgICAgIGR1cmF0aW9uOiA2MDAwCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICBtZXNzYWdlOiAn5Zu+54mH5LiK5Lyg5aSx6LSlJywKICAgICAgICAgIGR1cmF0aW9uOiA2MDAwCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVWaWRlb1N1Y2Nlc3M6IGZ1bmN0aW9uIGhhbmRsZVZpZGVvU3VjY2VzcyhyZXMsIGZpbGUpIHsKICAgICAgaWYgKGZpbGUucmVzcG9uc2UgIT09ICcnKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzKTsgLy8g5b6X5Yiw55qE5pivCiAgICAgICAgY29uc29sZS5sb2coJy0tLS0tLS0tLS0tLScpOwogICAgICAgIGNvbnNvbGUubG9nKGZpbGUpOyAvLyDlvpfliLDmmK8KICAgICAgICB0aGlzLnN5c01vdmllLnBsYXlJZCA9IHJlczsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgIG1lc3NhZ2U6ICfop4bpopHkuIrkvKDmiJDlip8nLAogICAgICAgICAgZHVyYXRpb246IDYwMDAKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgIG1lc3NhZ2U6ICfop4bpopHkuIrkvKDlpLHotKUnLAogICAgICAgICAgZHVyYXRpb246IDYwMDAKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHNhdmVPclVwZGF0ZTogZnVuY3Rpb24gc2F2ZU9yVXBkYXRlKCkgewogICAgICBpZiAodGhpcy5zeXNNb3ZpZS5pZCAhPSBudWxsKSB7CiAgICAgICAgdGhpcy51cGRhdGVNb3ZpZSgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYWRkTW92aWUoKTsKICAgICAgfQogICAgfSwKICAgIGFkZE1vdmllOiBmdW5jdGlvbiBhZGRNb3ZpZSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIGFwaS5hZGRNb3ZpZSh0aGlzLnN5c01vdmllKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICBtZXNzYWdlOiAn5re75Yqg5oiQ5YqfIScKICAgICAgICB9KTsKICAgICAgICAvLyDlhbPpl63lvLnmoYYKICAgICAgICBfdGhpczMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIC8vIOWIt+aWsOWIl+ihqAogICAgICAgIF90aGlzMy5mZXRjaFBhZ2VMaXN0KCk7CiAgICAgIH0pOwogICAgfSwKICAgIHVwZGF0ZU1vdmllOiBmdW5jdGlvbiB1cGRhdGVNb3ZpZSgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuc3lzTW92aWUpOwogICAgICBhcGkudXBkYXRlTW92aWUodGhpcy5zeXNNb3ZpZSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczQuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgbWVzc2FnZTogJ+S/ruaUueaIkOWKnyEnCiAgICAgICAgfSk7CiAgICAgICAgLy8gY29uc29sZS5sb2cocmVzcG9uc2UpCiAgICAgICAgLy8g5YWz6Zet5by55qGGCiAgICAgICAgX3RoaXM0LmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgICAvLyDliLfmlrDliJfooagKICAgICAgICBfdGhpczQuZmV0Y2hQYWdlTGlzdCgpOwogICAgICB9KTsKICAgIH0sCiAgICBhZGQ6IGZ1bmN0aW9uIGFkZCgpIHsKICAgICAgdGhpcy5zeXNNb3ZpZSA9IHt9OwogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIHJlbW92ZURhdGFCeUlkOiBmdW5jdGlvbiByZW1vdmVEYXRhQnlJZChpZCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKICAgICAgdGhpcy4kY29uZmlybSgn5q2k5pON5L2c5bCG5rC45LmF5Yig6Zmk6K+l5b2x6KeGLCDmmK/lkKbnu6fnu60/JywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIGFwaS5yZW1vdmVNb3ZpZUJ5SWQoaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBfdGhpczUuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfliKDpmaTmiJDlip8hJwogICAgICAgICAgfSk7CiAgICAgICAgICBfdGhpczUuZmV0Y2hQYWdlTGlzdCgpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICByZXNldERhdGE6IGZ1bmN0aW9uIHJlc2V0RGF0YSgpIHsKICAgICAgLy8gMS7muIXnqbrmkJzntKLmnaHku7YKICAgICAgdGhpcy5zZWFyY2hPYmogPSB7fTsKICAgICAgLy8gMi7lho3mrKHliLfmlrDliJfooagKICAgICAgdGhpcy5mZXRjaFBhZ2VMaXN0KCk7CiAgICB9LAogICAgZmV0Y2hQYWdlTGlzdDogZnVuY3Rpb24gZmV0Y2hQYWdlTGlzdCgpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CiAgICAgIHZhciBwYWdlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAxOwogICAgICB0aGlzLnBhZ2UgPSBwYWdlOwogICAgICBhcGkuZ2V0TW92aWVQYWdlSW5mbyh0aGlzLnBhZ2UsIHRoaXMubGltaXQsIHRoaXMuc2VhcmNoT2JqKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzNi5saXN0ID0gcmVzcG9uc2UuZGF0YS5yZWNvcmRzOwogICAgICAgIF90aGlzNi50b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWw7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"names":["api","categoryapi","data","list","page","limit","tota","searchObj","listLoading","dialogVisible","sysMovie","categoryList","fileurl","loading","VideodialogVisible","mounted","created","fetchPageList","findAll","methods","cidformatter","row","cloumn","cid","showPlayPage","console","log","id","$router","push","_this","then","response","edit","_this2","getMovieById","handleBeforeUpload","handleImageSuccess","res","file","image","$message","type","message","duration","handleVideoSuccess","playId","saveOrUpdate","updateMovie","addMovie","_this3","_this4","add","removeDataById","_this5","$confirm","confirmButtonText","cancelButtonText","removeMovieById","resetData","_this6","arguments","length","undefined","getMoviePageInfo","records","total"],"sources":["src/views/system/sysMovie/list.vue"],"sourcesContent":["<template>\r\n  <div v-loading=\"loading\" element-loading-text=\"文件上传中......\">\r\n    <!--查询表单-->\r\n    <div class=\"search-div\">\r\n      <el-form label-width=\"70px\" size=\"small\">\r\n        <el-row>\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"影视名称\">\r\n              <el-input\r\n                v-model=\"searchObj.name\"\r\n                style=\"width: 100%\"\r\n                placeholder=\"影视名称\"\r\n              />\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row style=\"display: flex\">\r\n          <el-button\r\n            type=\"primary\"\r\n            icon=\"el-icon-search\"\r\n            size=\"mini\"\r\n            @click=\"fetchPageList()\"\r\n          >搜索</el-button>\r\n          <el-button\r\n            icon=\"el-icon-refresh\"\r\n            size=\"mini\"\r\n            @click=\"resetData\"\r\n          >重置</el-button>\r\n        </el-row>\r\n      </el-form>\r\n    </div>\r\n\r\n    <!-- 工具条 -->\r\n    <div class=\"tools-div\">\r\n      <el-button\r\n        type=\"success\"\r\n        icon=\"el-icon-plus\"\r\n        size=\"mini\"\r\n        @click=\"add\"\r\n      >添 加</el-button>\r\n    </div>\r\n\r\n    <el-dialog title=\"添加/修改\" :visible.sync=\"dialogVisible\" width=\"40%\">\r\n      <el-form\r\n        ref=\"dataForm\"\r\n        :model=\"sysMovie\"\r\n        label-width=\"150px\"\r\n        size=\"small\"\r\n        style=\"padding-right: 40px\"\r\n      >\r\n        <el-form-item label=\"影视名称\">\r\n          <el-input v-model=\"sysMovie.name\" />\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"所属栏目\" prop=\"cid\">\r\n          <el-select v-model=\"sysMovie.cid\" placeholder=\"请输入影视分类\">\r\n            <el-option\r\n              v-for=\"item in categoryList\"\r\n              :key=\"item.id\"\r\n              :label=\"item.name\"\r\n              :value=\"item.id\"\r\n            />\r\n          </el-select>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"关键字\" prop=\"keyword\">\r\n          <el-input v-model=\"sysMovie.keyword\" />\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"导演\" prop=\"director\">\r\n          <el-input v-model=\"sysMovie.director\" />\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"演员\" prop=\"actor\">\r\n          <el-input v-model=\"sysMovie.actor\" />\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"影视图片\" prop=\"image\">\r\n          <el-upload\r\n            class=\"upload-demo\"\r\n            name=\"uploadImage\"\r\n            action=\"http://localhost:8085/admin/system/upload/uploadImage\"\r\n            :limit=\"1\"\r\n            :on-success=\"handleImageSuccess\"\r\n            :before-upload=\"handleBeforeUpload\"\r\n            :show-file-list=\"false\"\r\n          >\r\n            <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n          </el-upload>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"影视文件\" prop=\"video\">\r\n          <el-upload\r\n            class=\"upload-demo\"\r\n            name=\"uploadVideo\"\r\n            action=\"http://localhost:8085/admin/system/upload/uploadVideo\"\r\n            :limit=\"1\"\r\n            :on-success=\"handleVideoSuccess\"\r\n            :before-upload=\"handleBeforeUpload\"\r\n            :show-file-list=\"false\"\r\n          >\r\n            <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n          </el-upload>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"影视描述\" prop=\"description\">\r\n          <el-input v-model=\"sysMovie.description\" />\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button\r\n          size=\"small\"\r\n          icon=\"el-icon-refresh-right\"\r\n          @click=\"dialogVisible = false\"\r\n        >取 消</el-button>\r\n        <el-button\r\n          size=\"small\"\r\n          type=\"primary\"\r\n          icon=\"el-icon-check\"\r\n          @click=\"saveOrUpdate()\"\r\n        >确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <!-- 表格 -->\r\n    <el-table\r\n      v-loading=\"listLoading\"\r\n      :data=\"list\"\r\n      stripe\r\n      border\r\n      style=\"width: 100%; margin-top: 10px\"\r\n    >\r\n      <el-table-column label=\"序号\" width=\"70\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          {{ (page - 1) * limit + scope.$index + 1 }}\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <el-table-column prop=\"name\" label=\"影视名称\" />\r\n      <el-table-column prop=\"cid\" label=\"影视类型\" :formatter=\"cidformatter\" />\r\n      <el-table-column prop=\"director\" label=\"导演\" width=\"160\" />\r\n      <el-table-column prop=\"image\" label=\"剧照\">\r\n        <template slot-scope=\"scope\">\r\n          <viewer>\r\n            <img :src=\"scope.row.image\" alt=\"\" style=\"height: 80px\">\r\n          </viewer>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" width=\"200\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            type=\"primary\"\r\n            icon=\"el-icon-edit\"\r\n            size=\"mini\"\r\n            title=\"修改\"\r\n            @click=\"edit(scope.row.id)\"\r\n          />\r\n          <el-button\r\n            type=\"danger\"\r\n            icon=\"el-icon-delete\"\r\n            size=\"mini\"\r\n            title=\"删除\"\r\n            @click=\"removeDataById(scope.row.id)\"\r\n          />\r\n          <el-button\r\n            type=\"warning\"\r\n            icon=\"el-icon-baseball\"\r\n            size=\"mini\"\r\n            title=\"播放视频\"\r\n            @click=\"showPlayPage(scope.row)\"\r\n          />\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 分页组件 -->\r\n    <el-pagination\r\n      :current-page=\"page\"\r\n      :total=\"total\"\r\n      :page-size=\"limit\"\r\n      style=\"padding: 30px 0; text-align: center\"\r\n      layout=\"total, prev, pager, next, jumper\"\r\n      @current-change=\"fetchPageList\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// 导入\r\nimport api from '@/api/movie/movie.js'\r\n\r\n// 导入分类\r\nimport categoryapi from '@/api/category/category.js'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      list: [],\r\n      page: 1,\r\n      limit: 5,\r\n      tota: 0,\r\n      searchObj: {},\r\n      listLoading: false,\r\n      dialogVisible: false,\r\n      sysMovie: {},\r\n      // 影视分类列表\r\n      categoryList: [],\r\n      fileurl: '',\r\n      loading: false,\r\n      VideodialogVisible: false\r\n    }\r\n  },\r\n  mounted() {\r\n  },\r\n  created() {\r\n    // this.listLoading=true;\r\n    this.fetchPageList()\r\n    this.findAll()\r\n  },\r\n  methods: {\r\n    cidformatter(row,cloumn) {\r\n      if (row.cid === 2) {\r\n        return '电影'\r\n      }\r\n      else if (row.cid === 1) {\r\n        return '电视剧'\r\n      }\r\n    },\r\n    showPlayPage(row) {\r\n      console.log(row.id)\r\n      this.$router.push('/system/assignVideo?id=' + row.id)\r\n    },\r\n    findAll() {\r\n      categoryapi.findAll().then((response) => {\r\n        this.categoryList = response.data\r\n      })\r\n    },\r\n    edit(id) {\r\n      // 1.弹框\r\n      this.dialogVisible = true\r\n      // 2.赋值\r\n      api.getMovieById(id).then((response) => {\r\n        this.sysMovie = response.data\r\n      })\r\n    },\r\n    // 文件开始上传,开始屏幕遮罩\r\n    handleBeforeUpload() {\r\n      this.loading = true\r\n    },\r\n    // 图片上传成功的钩子函数\r\n    handleImageSuccess(res, file) {\r\n      console.log(res) // 得到的是图片地址\r\n      console.log(file) // 得到是一个对象\r\n      this.loading = false\r\n      if (file.response !== '') {\r\n        // this.sysMovie.image = file.response.data;\r\n        this.sysMovie.image = res\r\n        console.log(this.sysMovie.image)\r\n        this.$message({\r\n          type: 'info',\r\n          message: '图片上传成功',\r\n          duration: 6000\r\n        })\r\n      } else {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '图片上传失败',\r\n          duration: 6000\r\n        })\r\n      }\r\n    },\r\n    handleVideoSuccess(res, file) {\r\n      if (file.response !== '') {\r\n        console.log(res) // 得到的是\r\n        console.log('------------')\r\n        console.log(file) // 得到是\r\n        this.sysMovie.playId = res\r\n        this.$message({\r\n          type: 'info',\r\n          message: '视频上传成功',\r\n          duration: 6000\r\n        })\r\n      } else {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '视频上传失败',\r\n          duration: 6000\r\n        })\r\n      }\r\n    },\r\n\r\n    saveOrUpdate() {\r\n      if (this.sysMovie.id != null) {\r\n        this.updateMovie()\r\n      } else {\r\n        this.addMovie()\r\n      }\r\n    },\r\n    addMovie() {\r\n      api.addMovie(this.sysMovie).then((response) => {\r\n        this.$message({\r\n          type: 'success',\r\n          message: '添加成功!'\r\n        })\r\n        // 关闭弹框\r\n        this.dialogVisible = false\r\n        // 刷新列表\r\n        this.fetchPageList()\r\n      })\r\n    },\r\n    updateMovie() {\r\n      console.log(this.sysMovie)\r\n      api.updateMovie(this.sysMovie).then((response) => {\r\n        this.$message({\r\n          type: 'success',\r\n          message: '修改成功!'\r\n        })\r\n        // console.log(response)\r\n        // 关闭弹框\r\n        this.dialogVisible = false\r\n        // 刷新列表\r\n        this.fetchPageList()\r\n      })\r\n    },\r\n    add() {\r\n      this.sysMovie = {}\r\n      this.dialogVisible = true\r\n    },\r\n    removeDataById(id) {\r\n      this.$confirm('此操作将永久删除该影视, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        api.removeMovieById(id).then((response) => {\r\n          this.$message({\r\n            type: 'success',\r\n            message: '删除成功!'\r\n          })\r\n          this.fetchPageList()\r\n        })\r\n      })\r\n    },\r\n    resetData() {\r\n      // 1.清空搜索条件\r\n      this.searchObj = {}\r\n      // 2.再次刷新列表\r\n      this.fetchPageList()\r\n    },\r\n    fetchPageList(page = 1) {\r\n      this.page = page\r\n      api\r\n        .getMoviePageInfo(this.page, this.limit, this.searchObj)\r\n        .then((response) => {\r\n          this.list = response.data.records\r\n          this.total = response.data.total\r\n        })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n</style>\r\n"],"mappings":"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","ignoreList":[]}]}