{"remainingRequest":"D:\\传出\\xm\\第六天\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js!D:\\传出\\xm\\第六天\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\传出\\xm\\第六天\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\传出\\xm\\第六天\\vue-admin-template\\src\\views\\system\\sysMovie\\list.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\传出\\xm\\第六天\\vue-admin-template\\src\\views\\system\\sysMovie\\list.vue","mtime":1727433187221},{"path":"D:\\传出\\xm\\第六天\\vue-admin-template\\babel.config.js","mtime":1726969584090},{"path":"D:\\传出\\xm\\第六天\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1726969924886},{"path":"D:\\传出\\xm\\第六天\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js","mtime":1726969926736},{"path":"D:\\传出\\xm\\第六天\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1726969924886},{"path":"D:\\传出\\xm\\第六天\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js","mtime":1726969927562}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIOWvvOWFpQppbXBvcnQgYXBpIGZyb20gJ0AvYXBpL21vdmllL21vdmllLmpzJzsKCi8vIOWvvOWFpeWIhuexuwppbXBvcnQgY2F0ZWdvcnlhcGkgZnJvbSAnQC9hcGkvY2F0ZWdvcnkvY2F0ZWdvcnkuanMnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxpc3Q6IFtdLAogICAgICBwYWdlOiAxLAogICAgICBsaW1pdDogNSwKICAgICAgdG90YTogMCwKICAgICAgc2VhcmNoT2JqOiB7fSwKICAgICAgbGlzdExvYWRpbmc6IGZhbHNlLAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgc3lzTW92aWU6IHt9LAogICAgICAvLyDlvbHop4bliIbnsbvliJfooagKICAgICAgY2F0ZWdvcnlMaXN0OiBbXSwKICAgICAgc3lzQ2F0ZWdvcnk6IFtdLAogICAgICBmaWxldXJsOiAnJywKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIFZpZGVvZGlhbG9nVmlzaWJsZTogZmFsc2UKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkge30sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIC8vIHRoaXMubGlzdExvYWRpbmc9dHJ1ZTsKICAgIHRoaXMuZmV0Y2hQYWdlTGlzdCgpOwogICAgdGhpcy5maW5kQWxsKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBjaWRmb3JtYXR0ZXI6IGZ1bmN0aW9uIGNpZGZvcm1hdHRlcihyb3csIGNvbHVtbikgewogICAgICAvLyAxLumAmui/h+WIpOaWreiOt+WPluexu+WIq+WQjeensAogICAgICAvLyBpZiAocm93LmNpZCA9PT0gMikgewogICAgICAvLyAgIHJldHVybiAn55S15b2xJwogICAgICAvLyB9IGVsc2UgaWYgKHJvdy5jaWQgPT09IDEpIHsKICAgICAgLy8gICByZXR1cm4gJ+eUteinhuWJpycKICAgICAgLy8gfSBlbHNlIGlmIChyb3cuY2lkID09PSAzKSB7CiAgICAgIC8vICAgcmV0dXJuICfnu7zoibonCiAgICAgIC8vIH0gZWxzZSBpZiAocm93LmNpZCA9PT0gNCkgewogICAgICAvLyAgIHJldHVybiAn5Yqo5ryrJwogICAgICAvLyB9IGVsc2UgaWYgKHJvdy5jaWQgPT09IDUpIHsKICAgICAgLy8gICByZXR1cm4gJ+e9keWJpycKICAgICAgLy8gfSBlbHNlIGlmIChyb3cuY2lkID09PSA2KSB7CiAgICAgIC8vICAgcmV0dXJuICfnuqrlvZXniYcnCiAgICAgIC8vIH0gZWxzZSBpZiAocm93LmNpZCA9PT0gNykgewogICAgICAvLyAgIHJldHVybiAn6IKl55qC5YmnJwogICAgICAvLyB9IGVsc2UgaWYgKHJvdy5jaWQgPT09IDgpIHsKICAgICAgLy8gICByZXR1cm4gJ+efreinhumikScKICAgICAgLy8gfQoKICAgICAgLy8gMi7lrprkuYnkuIDkuKrnsbvliKvmmKDlsITooagKICAgICAgdmFyIGNhdGVnb3J5TWFwID0gewogICAgICAgIDE6ICfnlLXop4bliacnLAogICAgICAgIDI6ICfnlLXlvbEnLAogICAgICAgIDM6ICfnu7zoibonLAogICAgICAgIDQ6ICfliqjmvKsnLAogICAgICAgIDU6ICfnvZHliacnLAogICAgICAgIDY6ICfnuqrlvZXniYcnLAogICAgICAgIDc6ICfogqXnmoLliacnLAogICAgICAgIDg6ICfnn63op4bpopEnCiAgICAgIH07CiAgICAgIC8vIOS7juaYoOWwhOihqOS4reiOt+WPluexu+WIq+WQjeensO+8jOWmguaenGNpZOS4jeWtmOWcqOWImei/lOWbnifmnKrnn6UnCiAgICAgIHJldHVybiBjYXRlZ29yeU1hcFtyb3cuY2lkXSB8fCAn5pyq55+lJzsKICAgIH0sCiAgICBzaG93UGxheVBhZ2U6IGZ1bmN0aW9uIHNob3dQbGF5UGFnZShyb3cpIHsKICAgICAgY29uc29sZS5sb2cocm93LmlkKTsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9zeXN0ZW0vYXNzaWduVmlkZW8/aWQ9JyArIHJvdy5pZCk7CiAgICB9LAogICAgZmluZEFsbDogZnVuY3Rpb24gZmluZEFsbCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgY2F0ZWdvcnlhcGkuZmluZEFsbCgpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMuY2F0ZWdvcnlMaXN0ID0gcmVzcG9uc2UuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgZWRpdDogZnVuY3Rpb24gZWRpdChpZCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgLy8gMS7lvLnmoYYKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgLy8gMi7otYvlgLwKICAgICAgYXBpLmdldE1vdmllQnlJZChpZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczIuc3lzTW92aWUgPSByZXNwb25zZS5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDmlofku7blvIDlp4vkuIrkvKAs5byA5aeL5bGP5bmV6YGu572pCiAgICBoYW5kbGVCZWZvcmVVcGxvYWQ6IGZ1bmN0aW9uIGhhbmRsZUJlZm9yZVVwbG9hZCgpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgIH0sCiAgICAvLyDlm77niYfkuIrkvKDmiJDlip/nmoTpkqnlrZDlh73mlbAKICAgIGhhbmRsZUltYWdlU3VjY2VzczogZnVuY3Rpb24gaGFuZGxlSW1hZ2VTdWNjZXNzKHJlcywgZmlsZSkgewogICAgICBjb25zb2xlLmxvZyhyZXMpOyAvLyDlvpfliLDnmoTmmK/lm77niYflnLDlnYAKICAgICAgY29uc29sZS5sb2coZmlsZSk7IC8vIOW+l+WIsOaYr+S4gOS4quWvueixoQogICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgaWYgKGZpbGUucmVzcG9uc2UgIT09ICcnKSB7CiAgICAgICAgLy8gdGhpcy5zeXNNb3ZpZS5pbWFnZSA9IGZpbGUucmVzcG9uc2UuZGF0YTsKICAgICAgICB0aGlzLnN5c01vdmllLmltYWdlID0gcmVzOwogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuc3lzTW92aWUuaW1hZ2UpOwogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgICAgbWVzc2FnZTogJ+WbvueJh+S4iuS8oOaIkOWKnycsCiAgICAgICAgICBkdXJhdGlvbjogNjAwMAogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgICAgbWVzc2FnZTogJ+WbvueJh+S4iuS8oOWksei0pScsCiAgICAgICAgICBkdXJhdGlvbjogNjAwMAogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlVmlkZW9TdWNjZXNzOiBmdW5jdGlvbiBoYW5kbGVWaWRlb1N1Y2Nlc3MocmVzLCBmaWxlKSB7CiAgICAgIGlmIChmaWxlLnJlc3BvbnNlICE9PSAnJykgewogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7IC8vIOW+l+WIsOeahOaYrwogICAgICAgIGNvbnNvbGUubG9nKCctLS0tLS0tLS0tLS0nKTsKICAgICAgICBjb25zb2xlLmxvZyhmaWxlKTsgLy8g5b6X5Yiw5pivCiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy5zeXNNb3ZpZS5wbGF5SWQgPSByZXM7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICBtZXNzYWdlOiAn6KeG6aKR5LiK5Lyg5oiQ5YqfJywKICAgICAgICAgIGR1cmF0aW9uOiA2MDAwCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICBtZXNzYWdlOiAn6KeG6aKR5LiK5Lyg5aSx6LSlJywKICAgICAgICAgIGR1cmF0aW9uOiA2MDAwCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBzYXZlT3JVcGRhdGU6IGZ1bmN0aW9uIHNhdmVPclVwZGF0ZSgpIHsKICAgICAgaWYgKHRoaXMuc3lzTW92aWUuaWQgIT0gbnVsbCkgewogICAgICAgIHRoaXMudXBkYXRlTW92aWUoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmFkZE1vdmllKCk7CiAgICAgIH0KICAgIH0sCiAgICBhZGRNb3ZpZTogZnVuY3Rpb24gYWRkTW92aWUoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICBhcGkuYWRkTW92aWUodGhpcy5zeXNNb3ZpZSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgbWVzc2FnZTogJ+a3u+WKoOaIkOWKnyEnCiAgICAgICAgfSk7CiAgICAgICAgLy8g5YWz6Zet5by55qGGCiAgICAgICAgX3RoaXMzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgICAvLyDliLfmlrDliJfooagKICAgICAgICBfdGhpczMuZmV0Y2hQYWdlTGlzdCgpOwogICAgICB9KTsKICAgIH0sCiAgICB1cGRhdGVNb3ZpZTogZnVuY3Rpb24gdXBkYXRlTW92aWUoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICBjb25zb2xlLmxvZyh0aGlzLnN5c01vdmllKTsKICAgICAgYXBpLnVwZGF0ZU1vdmllKHRoaXMuc3lzTW92aWUpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXM0LiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgIG1lc3NhZ2U6ICfkv67mlLnmiJDlip8hJwogICAgICAgIH0pOwogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlKQogICAgICAgIC8vIOWFs+mXreW8ueahhgogICAgICAgIF90aGlzNC5kaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgICAgLy8g5Yi35paw5YiX6KGoCiAgICAgICAgX3RoaXM0LmZldGNoUGFnZUxpc3QoKTsKICAgICAgfSk7CiAgICB9LAogICAgYWRkOiBmdW5jdGlvbiBhZGQoKSB7CiAgICAgIHRoaXMuc3lzTW92aWUgPSB7fTsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICByZW1vdmVEYXRhQnlJZDogZnVuY3Rpb24gcmVtb3ZlRGF0YUJ5SWQoaWQpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuawuOS5heWIoOmZpOivpeW9seinhiwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBhcGkucmVtb3ZlTW92aWVCeUlkKGlkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgX3RoaXM1LiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5oiQ5YqfIScKICAgICAgICAgIH0pOwogICAgICAgICAgX3RoaXM1LmZldGNoUGFnZUxpc3QoKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgcmVzZXREYXRhOiBmdW5jdGlvbiByZXNldERhdGEoKSB7CiAgICAgIC8vIDEu5riF56m65pCc57Si5p2h5Lu2CiAgICAgIHRoaXMuc2VhcmNoT2JqID0ge307CiAgICAgIC8vIDIu5YaN5qyh5Yi35paw5YiX6KGoCiAgICAgIHRoaXMuZmV0Y2hQYWdlTGlzdCgpOwogICAgfSwKICAgIGZldGNoUGFnZUxpc3Q6IGZ1bmN0aW9uIGZldGNoUGFnZUxpc3QoKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwogICAgICB2YXIgcGFnZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogMTsKICAgICAgdGhpcy5wYWdlID0gcGFnZTsKICAgICAgYXBpLmdldE1vdmllUGFnZUluZm8odGhpcy5wYWdlLCB0aGlzLmxpbWl0LCB0aGlzLnNlYXJjaE9iaikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgICAgX3RoaXM2Lmxpc3QgPSByZXNwb25zZS5kYXRhLnJlY29yZHM7CiAgICAgICAgX3RoaXM2LnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbDsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["api","categoryapi","data","list","page","limit","tota","searchObj","listLoading","dialogVisible","sysMovie","categoryList","sysCategory","fileurl","loading","VideodialogVisible","mounted","created","fetchPageList","findAll","methods","cidformatter","row","column","categoryMap","cid","showPlayPage","console","log","id","$router","push","_this","then","response","edit","_this2","getMovieById","handleBeforeUpload","handleImageSuccess","res","file","image","$message","type","message","duration","handleVideoSuccess","playId","saveOrUpdate","updateMovie","addMovie","_this3","_this4","add","removeDataById","_this5","$confirm","confirmButtonText","cancelButtonText","removeMovieById","resetData","_this6","arguments","length","undefined","getMoviePageInfo","records","total"],"sources":["src/views/system/sysMovie/list.vue"],"sourcesContent":["<template>\r\n  <div v-loading=\"loading\" element-loading-text=\"文件上传中......\">\r\n    <!--查询表单-->\r\n    <div class=\"search-div\">\r\n      <el-form label-width=\"70px\" size=\"small\">\r\n        <el-row>\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"影视名称\">\r\n              <el-input\r\n                v-model=\"searchObj.name\"\r\n                style=\"width: 100%\"\r\n                placeholder=\"影视名称\"\r\n              />\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row style=\"display: flex\">\r\n          <el-button\r\n            type=\"primary\"\r\n            icon=\"el-icon-search\"\r\n            size=\"mini\"\r\n            @click=\"fetchPageList()\"\r\n          >搜索</el-button>\r\n          <el-button\r\n            icon=\"el-icon-refresh\"\r\n            size=\"mini\"\r\n            @click=\"resetData\"\r\n          >重置</el-button>\r\n        </el-row>\r\n      </el-form>\r\n    </div>\r\n\r\n    <!-- 工具条 -->\r\n    <div class=\"tools-div\">\r\n      <el-button\r\n        type=\"success\"\r\n        icon=\"el-icon-plus\"\r\n        size=\"mini\"\r\n        @click=\"add\"\r\n      >添 加</el-button>\r\n    </div>\r\n\r\n    <el-dialog title=\"添加/修改\" :visible.sync=\"dialogVisible\" width=\"40%\">\r\n      <el-form\r\n        ref=\"dataForm\"\r\n        :model=\"sysMovie\"\r\n        label-width=\"150px\"\r\n        size=\"small\"\r\n        style=\"padding-right: 40px\"\r\n      >\r\n        <el-form-item label=\"影视名称\">\r\n          <el-input v-model=\"sysMovie.name\" />\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"所属栏目\" prop=\"cid\">\r\n          <el-select v-model=\"sysMovie.cid\" placeholder=\"请输入影视分类\">\r\n            <el-option\r\n              v-for=\"item in categoryList\"\r\n              :key=\"item.id\"\r\n              :label=\"item.name\"\r\n              :value=\"item.id\"\r\n            />\r\n          </el-select>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"关键字\" prop=\"keyword\">\r\n          <el-input v-model=\"sysMovie.keyword\" />\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"导演\" prop=\"director\">\r\n          <el-input v-model=\"sysMovie.director\" />\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"演员\" prop=\"actor\">\r\n          <el-input v-model=\"sysMovie.actor\" />\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"影视图片\" prop=\"image\">\r\n          <el-upload\r\n            class=\"upload-demo\"\r\n            name=\"uploadImage\"\r\n            action=\"http://localhost:8085/admin/system/upload/uploadImage\"\r\n            :limit=\"1\"\r\n            :on-success=\"handleImageSuccess\"\r\n            :before-upload=\"handleBeforeUpload\"\r\n            :show-file-list=\"false\"\r\n          >\r\n            <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n          </el-upload>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"影视文件\" prop=\"video\">\r\n          <el-upload\r\n            class=\"upload-demo\"\r\n            name=\"uploadVideo\"\r\n            action=\"http://localhost:8085/admin/system/upload/uploadVideo\"\r\n            :limit=\"1\"\r\n            :on-success=\"handleVideoSuccess\"\r\n            :before-upload=\"handleBeforeUpload\"\r\n            :show-file-list=\"false\"\r\n          >\r\n            <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n          </el-upload>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"影视描述\" prop=\"description\">\r\n          <el-input v-model=\"sysMovie.description\" />\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button\r\n          size=\"small\"\r\n          icon=\"el-icon-refresh-right\"\r\n          @click=\"dialogVisible = false\"\r\n        >取 消</el-button>\r\n        <el-button\r\n          size=\"small\"\r\n          type=\"primary\"\r\n          icon=\"el-icon-check\"\r\n          @click=\"saveOrUpdate()\"\r\n        >确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <!-- 表格 -->\r\n    <el-table\r\n      v-loading=\"listLoading\"\r\n      :data=\"list\"\r\n      stripe\r\n      border\r\n      style=\"width: 100%; margin-top: 10px\"\r\n    >\r\n      <el-table-column label=\"序号\" width=\"70\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          {{ (page - 1) * limit + scope.$index + 1 }}\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <el-table-column prop=\"name\" label=\"影视名称\" />\r\n      <el-table-column prop=\"cid\" label=\"影视类型\" :formatter=\"cidformatter\" />\r\n      <el-table-column prop=\"director\" label=\"导演\" width=\"160\" />\r\n      <el-table-column prop=\"image\" label=\"剧照\">\r\n        <template slot-scope=\"scope\">\r\n          <viewer>\r\n            <img :src=\"scope.row.image\" alt=\"\" style=\"height: 80px\">\r\n          </viewer>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" width=\"200\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            type=\"primary\"\r\n            icon=\"el-icon-edit\"\r\n            size=\"mini\"\r\n            title=\"修改\"\r\n            @click=\"edit(scope.row.id)\"\r\n          />\r\n          <el-button\r\n            type=\"danger\"\r\n            icon=\"el-icon-delete\"\r\n            size=\"mini\"\r\n            title=\"删除\"\r\n            @click=\"removeDataById(scope.row.id)\"\r\n          />\r\n          <el-button\r\n            type=\"warning\"\r\n            icon=\"el-icon-baseball\"\r\n            size=\"mini\"\r\n            title=\"播放视频\"\r\n            @click=\"showPlayPage(scope.row)\"\r\n          />\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 分页组件 -->\r\n    <el-pagination\r\n      :current-page=\"page\"\r\n      :total=\"total\"\r\n      :page-size=\"limit\"\r\n      style=\"padding: 30px 0; text-align: center\"\r\n      layout=\"total, prev, pager, next, jumper\"\r\n      @current-change=\"fetchPageList\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// 导入\r\nimport api from '@/api/movie/movie.js'\r\n\r\n// 导入分类\r\nimport categoryapi from '@/api/category/category.js'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      list: [],\r\n      page: 1,\r\n      limit: 5,\r\n      tota: 0,\r\n      searchObj: {},\r\n      listLoading: false,\r\n      dialogVisible: false,\r\n      sysMovie: {},\r\n      // 影视分类列表\r\n      categoryList: [],\r\n      sysCategory: [],\r\n      fileurl: '',\r\n      loading: false,\r\n      VideodialogVisible: false\r\n    }\r\n  },\r\n  mounted() {\r\n  },\r\n  created() {\r\n    // this.listLoading=true;\r\n    this.fetchPageList()\r\n    this.findAll()\r\n  },\r\n  methods: {\r\n    cidformatter(row, column) {\r\n      // 1.通过判断获取类别名称\r\n      // if (row.cid === 2) {\r\n      //   return '电影'\r\n      // } else if (row.cid === 1) {\r\n      //   return '电视剧'\r\n      // } else if (row.cid === 3) {\r\n      //   return '综艺'\r\n      // } else if (row.cid === 4) {\r\n      //   return '动漫'\r\n      // } else if (row.cid === 5) {\r\n      //   return '网剧'\r\n      // } else if (row.cid === 6) {\r\n      //   return '纪录片'\r\n      // } else if (row.cid === 7) {\r\n      //   return '肥皂剧'\r\n      // } else if (row.cid === 8) {\r\n      //   return '短视频'\r\n      // }\r\n\r\n      // 2.定义一个类别映射表\r\n      const categoryMap = {\r\n        1: '电视剧',\r\n        2: '电影',\r\n        3: '综艺',\r\n        4: '动漫',\r\n        5: '网剧',\r\n        6: '纪录片',\r\n        7: '肥皂剧',\r\n        8: '短视频'\r\n      }\r\n      // 从映射表中获取类别名称，如果cid不存在则返回'未知'\r\n      return categoryMap[row.cid] || '未知'\r\n    },\r\n    showPlayPage(row) {\r\n      console.log(row.id)\r\n      this.$router.push('/system/assignVideo?id=' + row.id)\r\n    },\r\n    findAll() {\r\n      categoryapi.findAll().then((response) => {\r\n        this.categoryList = response.data\r\n      })\r\n    },\r\n    edit(id) {\r\n      // 1.弹框\r\n      this.dialogVisible = true\r\n      // 2.赋值\r\n      api.getMovieById(id).then((response) => {\r\n        this.sysMovie = response.data\r\n      })\r\n    },\r\n    // 文件开始上传,开始屏幕遮罩\r\n    handleBeforeUpload() {\r\n      this.loading = true\r\n    },\r\n    // 图片上传成功的钩子函数\r\n    handleImageSuccess(res, file) {\r\n      console.log(res) // 得到的是图片地址\r\n      console.log(file) // 得到是一个对象\r\n      this.loading = false\r\n      if (file.response !== '') {\r\n        // this.sysMovie.image = file.response.data;\r\n        this.sysMovie.image = res\r\n        console.log(this.sysMovie.image)\r\n        this.$message({\r\n          type: 'info',\r\n          message: '图片上传成功',\r\n          duration: 6000\r\n        })\r\n      } else {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '图片上传失败',\r\n          duration: 6000\r\n        })\r\n      }\r\n    },\r\n    handleVideoSuccess(res, file) {\r\n      if (file.response !== '') {\r\n        console.log(res) // 得到的是\r\n        console.log('------------')\r\n        console.log(file) // 得到是\r\n        this.loading = false\r\n        this.sysMovie.playId = res\r\n        this.$message({\r\n          type: 'info',\r\n          message: '视频上传成功',\r\n          duration: 6000\r\n        })\r\n      } else {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '视频上传失败',\r\n          duration: 6000\r\n        })\r\n      }\r\n    },\r\n\r\n    saveOrUpdate() {\r\n      if (this.sysMovie.id != null) {\r\n        this.updateMovie()\r\n      } else {\r\n        this.addMovie()\r\n      }\r\n    },\r\n    addMovie() {\r\n      api.addMovie(this.sysMovie).then((response) => {\r\n        this.$message({\r\n          type: 'success',\r\n          message: '添加成功!'\r\n        })\r\n        // 关闭弹框\r\n        this.dialogVisible = false\r\n        // 刷新列表\r\n        this.fetchPageList()\r\n      })\r\n    },\r\n    updateMovie() {\r\n      console.log(this.sysMovie)\r\n      api.updateMovie(this.sysMovie).then((response) => {\r\n        this.$message({\r\n          type: 'success',\r\n          message: '修改成功!'\r\n        })\r\n        // console.log(response)\r\n        // 关闭弹框\r\n        this.dialogVisible = false\r\n        // 刷新列表\r\n        this.fetchPageList()\r\n      })\r\n    },\r\n    add() {\r\n      this.sysMovie = {}\r\n      this.dialogVisible = true\r\n    },\r\n    removeDataById(id) {\r\n      this.$confirm('此操作将永久删除该影视, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        api.removeMovieById(id).then((response) => {\r\n          this.$message({\r\n            type: 'success',\r\n            message: '删除成功!'\r\n          })\r\n          this.fetchPageList()\r\n        })\r\n      })\r\n    },\r\n    resetData() {\r\n      // 1.清空搜索条件\r\n      this.searchObj = {}\r\n      // 2.再次刷新列表\r\n      this.fetchPageList()\r\n    },\r\n    fetchPageList(page = 1) {\r\n      this.page = page\r\n      api\r\n        .getMoviePageInfo(this.page, this.limit, this.searchObj)\r\n        .then((response) => {\r\n          console.log(response)\r\n          this.list = response.data.records\r\n          this.total = response.data.total\r\n        })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n</style>\r\n"],"mappings":"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","ignoreList":[]}]}